/**
*
*   PrismGrammar
*   @version: 0.9
*
*   Transform a grammar specification in JSON format, into a syntax-highlighter for Prism
*   https://github.com/foo123/prism-grammar
*
**/!function(t,e,n){"use strict";var r,i="object"==typeof module&&module.exports,s="function"==typeof define&&define.amd;i?module.exports=(module.$deps=module.$deps||{})[e]=module.$deps[e]||n.call(t,{NODE:module})||1:s&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(e)?define(e,["require","exports","module"],function(e,r,i){return n.call(t,{AMD:i})}):e in t||(t[e]=r=n.call(t,{})||1)&&s&&define(e,[],function(){return r})}(this,"PrismGrammar",function(t){var e,n,r=1/0,s=2,o=4,u=8,c=16,a=17,p=18,f=20,h=32,g=33,d=34,k=64,_=128,E=256,m=257,R=258,v=259,y=512,x=1024,C=2048,b=4096,T={EITHER:k,ALL:_,ZEROORONE:m,ZEROORMORE:R,ONEORMORE:v,REPEATED:E},w={INDENT:C,DEDENT:b,BLOCK:h,COMMENT:d,ESCAPEDBLOCK:g,SIMPLE:c,GROUP:y,NGRAM:x},M=void 0,S="prototype",O="hasOwnProperty",D="propertyIsEnumerable",P=(Object.keys,Array[S],Object[S]),I=(Function[S],P.toString),N=4,A=5,L=8,B=16,H=17,j=18,Q=32,$=64,q=128,V=256,F=512,G=1024,K=2048,U=B|Q,W=$|Q;TO_STRING={"[object Array]":Q,"[object RegExp]":V,"[object Number]":N,"[object String]":B,"[object Function]":q,"[object Object]":$},get_type=function(t){var e;return null===t?F:!0===t||!1===t?L:M===t?G:(e=I.call(t),e=TO_STRING[e]||K,N===e||t instanceof Number?isNaN(t)?A:N:B===e||t instanceof String?1===t.length?H:B:Q===e||t instanceof Array?Q:V===e||t instanceof RegExp?V:q===e||t instanceof Function?q:$===e?$:K)},Extend=Object.create,Merge=function(){var t,e,n,r,i,s,l,o=arguments;for(e=o[0]||{},t=o.length,s=1;t>s;s++)if(n=o[s],$===get_type(n))for(i in n)n[O](i)&&n[D](i)&&(r=n[i],l=get_type(r),e[i]=N&l?0+r:U&l?r.slice(0):r);return e},make_array=function(t,e){return e||Q!==get_type(t)?[t]:t},make_array_2=function(t,e){return t=make_array(t,e),(e||Q!==get_type(t[0]))&&(t=[t]),t},clone=function(t){var e,n=get_type(t);if(!(W&n))return t;var r,i={};for(r in t)t[O](r)&&t[D](r)&&(e=get_type(t[r]),i[r]=$&e?clone(t[r]):U&e?t[r].slice():t[r]);return i},extend=function(){var t=arguments,e=t.length;if(1>e)return null;if(2>e)return clone(t[0]);var n,r,i,s,l=t[0],o=clone(l);for(e--,r=1;e>r;r++)if(n=t[r])for(i in n)n[O](i)&&n[D](i)&&(l[O](i)&&l[D](i)?(s=get_type(l[i]),$&~B&s&&(o[i]=extend(l[i],n[i]))):o[i]=clone(n[i]));return o},escRegexp=function(t){return t.replace(/([.*+?^${}()|[\]\/\\\-])/g,"\\$1")},groupReplace=function(t,e){var n,r,i,s;for(s=function(t,n){return e[1+parseInt(n,10)]},n=t.split("$$"),i=n.length,r=0;i>r;r++)n[r]=n[r].replace(/\$(\d{1,2})/g,s);return n.join("$")},byLength=function(t,e){return e.length-t.length},hasPrefix=function(t,e){return B&get_type(e)&&B&get_type(t)&&e.length&&e.length<=t.length&&e==t.substr(0,e.length)},getRegexp=function(t,e,n){if(!t||N==get_type(t))return t;var r,i=e?e.length||0:0;if(i&&e==t.substr(0,i)){var s,l,o,u,r,c,a=t.substr(i),p=a[0],f="";for(r=a.length;r--&&(c=a[r],p!=c);)"i"==c.toLowerCase()&&(f="i");return s=a.substring(1,r),l="^("+s+")",n[l]||(o=new RegExp(l,f),u={peek:null,negativepeek:null},n[l]=[o,u]),n[l]}return t},getCombinedRegexp=function(t,e){var n={},r="",i=get_type(e);(B==i||H==i)&&(r=e);var s=t.sort(byLength).map(function(t){return n[t.charAt(0)]=1,escRegexp(t)}).join("|");return[new RegExp("^("+s+")"+r),{peek:n,negativepeek:null},1]},_id_=0,getId=function(){return++_id_},isNode="undefined"!=typeof global&&"[object global]"=={}.toString.call(global)?1:0,isBrowser=isNode||"undefined"==typeof navigator?0:1,isWorker="function"==typeof importScripts&&navigator instanceof WorkerNavigator?1:0,getCurrentPath=function(){var t,e,n=null;return isNode?(n=__filename,{path:__dirname,file:__filename,base:__dirname}):(isWorker?n=self.location.href:isBrowser&&(t=document.location.href.split("#")[0].split("?")[0].split("/").slice(0,-1).join("/"),(e=document.getElementsByTagName("script"))&&e.length&&(n=e[e.length-1].src)),n?{path:n.split("/").slice(0,-1).join("/"),file:n,base:t}:{path:null,file:null,base:null})},thisPath=getCurrentPath();var Z=Math.max,z=/^[\s\u00a0]+/,Y=/[^\s\u00a0]/,J=function(t,e,n,r,i){var s,l;for(null===e&&(e=t.search(Y),-1==e&&(e=t.length)),s=r||0,l=i||0;e>s;++s)l+="	"==t.charAt(s)?n-l%n:1;return l},X=function(t){var e=this;e._=null,e.s=t?""+t:"",e.start=e.pos=0,e.lCP=e.lCV=0,e.lS=0};X[S]={constructor:X,_:null,s:"",start:0,pos:0,lCP:0,lCV:0,lS:0,toString:function(){return this.s},fromStream:function(t){var e=this;return e._=t,e.s=""+t.string,e.start=t.start,e.pos=t.pos,e.lCP=t.lastColumnPos,e.lCV=t.lastColumnValue,e.lS=t.lineStart,e},sol:function(){return 0==this.pos},eol:function(){return this.pos>=this.s.length},chr:function(t,e){var n=this,r=n.s.charAt(n.pos)||null;return r&&t==r?(!1!==e&&(n.pos+=1,n._&&(n._.pos=n.pos)),r):!1},chl:function(t,e){var n=this,r=n.s.charAt(n.pos)||null;return r&&-1<t.indexOf(r)?(!1!==e&&(n.pos+=1,n._&&(n._.pos=n.pos)),r):!1},str:function(t,e,n){var r,i=this,s=i.pos,l=i.s,o=l.charAt(s)||null;return o&&e[o]&&(r=t.length,t==l.substr(s,r))?(!1!==n&&(i.pos+=r,i._&&(i._.pos=i.pos)),t):!1},rex:function(t,e,n,r,i){{var s,l=this,o=l.pos,u=l.s;u.charAt(o)||null}return s=u.slice(o).match(t),!s||s.index>0?!1:(!1!==i&&(l.pos+=s[r||0].length,l._&&(l._.pos=l.pos)),s)},spc:function(t){var e,n=this,r=n.pos,i=n.s.slice(r);return(e=i.match(z))?(!1!==t&&(n.pos+=e[0].length,n._&&(n._.pos=n.pos)),1):0},end:function(){var t=this;return t.pos=t.s.length,t._&&(t._.pos=t.pos),t},nxt:function(){var t,e=this,n=e.s;return e.pos<n.length?(t=n.charAt(e.pos++)||null,e._&&(e._.pos=e.pos),t):void 0},bck:function(t){var e=this;return e.pos=Z(0,e.pos-t),e._&&(e._.pos=e.pos),e},bck2:function(t){var e=this;return e.pos=Z(0,t),e._&&(e._.pos=e.pos),e},col:function(t){var e=this;return t=t||1,e.lCP<e.start&&(e.lCV=J(e.s,e.start,t,e.lCP,e.lCV),e.lCP=e.start,e._&&(e._.start=e.start,e._.lastColumnPos=e.lCP,e._.lastColumnValue=e.lCV,e._.lineStart=e.lS)),e.lCV-(e.lS?J(e.s,e.lS,t):0)},ind:function(t){var e=this;return t=t||1,J(e.s,null,t)-(e.lS?J(e.s,e.lS,t):0)},cur:function(t){var e=this,n=e.s.slice(e.start,e.pos);return t&&(e.start=e.pos),n},sft:function(){return this.start=this.pos,this}};var te=function(t){this._=t||[]};te[S]={constructor:te,_:null,toString:function(){var t=this._.slice();return t.reverse().join("\n")},clone:function(){return new te(this._.slice())},isEmpty:function(){return 0>=this._.length},pos:function(){return this._.length},peek:function(t){var e=this._;if(t="undefined"==typeof t?-1:t,e.length){if(0>t&&0<=e.length+t)return e[e.length+t];if(t>=0&&t<e.length)return e[t]}return null},pop:function(){return this._.pop()},shift:function(){return this._.shift()},push:function(t){return this._.push(t),this},unshift:function(t){return this._.unshift(t),this},pushAt:function(t,e,n,r){var i=this._;return n&&r&&(e[n]=r),t<i.length?i.splice(t,0,e):i.push(e),this},empty:function(t,e){{var n=this._;n.length}if(t&&e)for(;n.length&&n[n.length-1]&&n[n.length-1][t]==e;)n.pop();else n.length=0;return this}};var ee=function(t,e){var n=this;n.id=e?(new Date).getTime():0,n.l=t||0,n.stack=new te,n.data=new te,n.col=0,n.indent=0,n.t=null,n.inBlock=null,n.endBlock=null};ee[S]={constructor:ee,id:0,l:0,col:0,indent:0,stack:null,data:null,t:null,inBlock:null,endBlock:null,clone:function(t){var e=this,n=new ee(e.l,t);return n.t=e.t,n.col=e.col,n.indent=e.indent,n.stack=e.stack.clone(),n.data=e.data.clone(),n.inBlock=e.inBlock,n.endBlock=e.endBlock,n},toString:function(){var t=this;return["",t.id,t.l,t.t,t.inBlock||"0"].join("_")}};var ne=function(t,e){var n,r=this;return(n=t.chr(r.tp,e))?[r.tk,n]:!1},re=function(t,e){var n,r=this;return(n=t.chl(r.tp,e))?[r.tk,n]:!1},ie=function(t,e){var n,r=this;return(n=t.str(r.tp,r.p,e))?[r.tk,n]:!1},se=function(t,e){var n,r=this;return(n=t.rex(r.tp,r.p,r.np,r.tg,e))?[r.tk,n]:!1},le=function(t,e){var n=this;return!1!==e&&t.end(),[n.tk,""]},oe=function we(t,e,n,r){var i=this;switch(i.$class=we,i.mt=s,i.tt=t||H,i.tn=e,i.tk=r||0,i.tg=0,i.tp=null,i.p=null,i.np=null,i.tt){case H:case j:i.tp=n,i.get=j===i.tt?re:ne;break;case B:i.tp=n,i.p={},i.p[""+n.charAt(0)]=1,i.get=ie;break;case V:i.tp=n[0],i.p=n[1].peek||null,i.np=n[1].negativepeek||null,i.tg=n[2]||0,i.get=se;break;case F:i.tp=null,i.get=le}};oe[S]={constructor:oe,$class:null,mt:null,tt:null,tn:null,tp:null,tg:0,tk:0,p:null,np:null,get:function(){return!1},toString:function(){return["[","Matcher: ",this.tn,", Pattern: ",this.tp?this.tp.toString():null,"]"].join("")}};var ue=function Me(t,e,n){var r=this;r.$class=Me,r.mt=o,r.tn=t,r.ms=e,r.ownKey=!1!==n};ue[S]=Merge(Extend(oe[S]),{constructor:ue,ms:null,ownKey:!0,get:function(t,e){var n,r,i=this.ms,s=i.length,l=this.ownKey;for(n=0;s>n;n++)if(r=i[n].get(t,e))return l?[n,r[1]]:r;return!1}});var ce=function Se(t,e,n){var r=this;r.$class=Se,r.mt=u,r.tn=t,r.s=new ue(r.tn+"_Start",e,!1),r.e=n};ce[S]=Merge(Extend(oe[S]),{constructor:ce,s:null,e:null,get:function(t,e){var n,r=this,i=r.s,s=r.e;if(n=i.get(t,e)){var l,o=s[n[0]],u=get_type(o),c=i.ms[n[0]].tt;return V==c&&(N==u?(l=n[1][o+1],o=new oe(l.length>1?B:H,r.tn+"_End",l)):B==u&&(l=groupReplace(o,n[1]),o=new oe(l.length>1?B:H,r.tn+"_End",l))),o}return!1}});var ae=function(t,e,n,r){var i=get_type(e);if(N==i)return e;if(!r[t]){n=n||0;var s,l=0;e&&e.isCharList&&(l=1,delete e.isCharList),s=F&i?new oe(F,t,e,n):H==i?new oe(H,t,e,n):B&i?l?new oe(j,t,e,n):new oe(B,t,e,n):Q&i?new oe(V,t,e,n):e,r[t]=s}return r[t]},pe=function(t,e,n,r,i,s){if(!s[t]){var l,o,u,c,a,p,f,h=0,g=0,d=1;if(l=make_array(e),u=l.length,1==u)f=ae(t,getRegexp(l[0],n,i),0,s);else if(u>1){for(c=(u>>1)+1,o=0;c>=o;o++)a=get_type(l[o]),p=get_type(l[u-1-o]),(H!=a||H!=p)&&(d=0),Q&a||Q&p?h=1:(hasPrefix(l[o],n)||hasPrefix(l[u-1-o],n))&&(g=1);if(!d||r&&B&get_type(r))if(!r||h||g){for(o=0;u>o;o++)l[o]=Q&get_type(l[o])?pe(t+"_"+o,l[o],n,r,i,s):ae(t+"_"+o,getRegexp(l[o],n,i),o,s);f=u>1?new ue(t,l):l[0]}else f=ae(t,getCombinedRegexp(l,r),0,s);else l=l.slice().join(""),l.isCharList=1,f=ae(t,l,0,s)}s[t]=f}return s[t]},fe=function(t,e,n,r,i){if(!i[t]){var s,l,o,u,c,a,p;for(u=[],c=[],s=make_array_2(e),l=0,o=s.length;o>l;l++)a=ae(t+"_0_"+l,getRegexp(s[l][0],n,r),l,i),p=s[l].length>1?V!=a.tt||B!=get_type(s[l][1])||hasPrefix(s[l][1],n)?ae(t+"_1_"+l,getRegexp(s[l][1],n,r),l,i):s[l][1]:a,u.push(a),c.push(p);i[t]=new ce(t,u,c)}return i[t]},he=1,ge=2,de=function Oe(t,e,n){var r=this;r.$class=Oe,r.tt=t||c,r.id=e,r.tk=n,r.REQ=0,r.ERR=0,r.MTCH=0,r.CLONE=["tk"]};de[S]={constructor:de,$class:null,sID:null,id:null,tt:null,tk:null,ta:null,REQ:0,ERR:0,MTCH:0,CLONE:null,act:function(t,e){var n,r,i=this.ta||null,s=e.data;if(i)if(n=i[1],he===i[0]&&n)t&&(r=get_type(n),n=N==r?t[1][n]:groupReplace(n,t[1])),s.push(n);else if(ge===i[0])if(n){if(t&&(r=get_type(n),n=N==r?t[1][n]:groupReplace(n,t[1])),s.isEmpty()||n!=s.peek())return n;s.pop()}else s.length&&s.pop();return 0},get:function(t,e){var n=this,r=n.tm,i=n.tk,s=n.tt,l=n.id,o=null;if(n.MTCH=0,f==s)return n.ERR=0,n.REQ=0,!0;if(a==s){if(t.spc(),t.eol())return l}else if(p==s)n.ERR=n.REQ&&t.spc()&&!t.eol()?1:0,n.REQ=0;else if(o=i.get(t))return r&&(n.MTCH=n.act(o,e)),l;return!1},req:function(t){return this.REQ=t?1:0,this},err:function(){var t=this;return t.REQ?'Token "'+t.id+'" Expected':t.MTCH?'Token "'+t.MTCH+'" No Match':'Syntax Error: "'+t.id+'"'},clone:function(){var t,e,n,r=this,i=r.CLONE;if(t=new r.$class,t.tt=r.tt,t.id=r.id,t.tm=r.tm?r.tm.slice():r.tm,i&&i.length)for(e=0,n=i.length;n>e;e++)t[i[e]]=r[i[e]];return t},toString:function(){return["[","Tokenizer: ",this.id,", Matcher: ",this.tk?this.tk.toString():null,"]"].join("")}};var ke=function De(t,e,n,r,i,s){var l=this;l.$class=De,l.tt=t,l.id=e,l.tk=n,l.REQ=0,l.ERR=0,l.MTCH=0,l.mline="undefined"==typeof r?1:r,l.esc=i||"\\",l.inter=s,l.CLONE=["tk","mline","esc","inter"]};ke[S]=Merge(Extend(de[S]),{constructor:ke,inter:0,mline:0,esc:null,get:function(t,e){var n,r,i,s,l,o,u,c,a,p=this,f=0,h=0,k="",_=p.mline,E=p.tk,m=p.id,R=p.tt,v=p.inter,y=v?m+".inside":m,x=0,C=g==R,b=p.esc;if(d===R&&(p.REQ=0),l=0,e.inBlock===m?(h=1,n=e.endBlock,l=1,o=y):!e.inBlock&&(n=E.get(t))&&(h=1,e.inBlock=m,e.endBlock=n,o=m),h){if(i=e.stack.pos(),s=F===n.tt,v){if(l&&s&&t.sol())return p.REQ=0,e.inBlock=null,e.endBlock=null,!1;if(!l)return e.stack.pushAt(i,p.clone(),"sID",m),o}if(f=n.get(t),r=_,a=0,f)o=s?y:m;else for(c=t.pos;!t.eol();){if(u=t.pos,!(C&&x||!n.get(t))){v&&t.pos>u&&u>c?(o=y,t.bck2(u),a=1):(o=m,f=1);break}k=t.nxt(),x=!x&&k==b}return r=_||C&&x,f||!r&&!a?(e.inBlock=null,e.endBlock=null):e.stack.pushAt(i,p.clone(),"sID",m),o}return!1}});var _e=function Pe(t,e,n,i,s){var l=this;l.$class=Pe,l.tt=t||E,l.id=e||null,l.tk=null,l.ts=null,l.min=i||0,l.max=s||r,l.found=0,l.CLONE=["ts","min","max","found"],n&&l.set(n)};_e[S]=Merge(Extend(de[S]),{constructor:_e,ts:null,min:0,max:1,found:0,set:function(t){return t&&(this.ts=make_array(t)),this},get:function(t,e){var n,r,i,s,l,o,u=this,c=u.ts,a=c.length,p=u.found,f=u.min,h=u.max,g=0;for(u.ERR=0,u.REQ=0,u.MTCH=0,s=t.pos,l=e.stack.pos(),o=u.id+"_"+getId(),n=0;a>n;n++){if(r=c[n].clone().req(1),i=r.get(t,e),!1!==i){if(++p,h>=p)return u.found=p,e.stack.pushAt(l,u.clone(),"sID",o),u.found=0,u.MTCH=r.MTCH,i;break}r.REQ&&g++,r.ERR&&t.bck2(s)}return u.REQ=f>p,u.ERR=p>h||f>p&&g>0,!1}});var Ee=function Ie(t,e,n){_e.call(this,t,e,n,1,1),this.$class=Ie};Ee[S]=Merge(Extend(_e[S]),{constructor:Ee,get:function(t,e){var n,r,i,s,l=this,o=l.ts,u=o.length,c=0,a=0;for(l.REQ=1,l.ERR=0,l.MTCH=0,s=t.pos,i=0;u>i;i++){if(r=o[i].clone().req(1),n=r.get(t,e),c+=r.REQ?1:0,!1!==n)return l.MTCH=r.MTCH,n;r.ERR&&(a++,t.bck2(s))}return l.REQ=c>0,l.ERR=u==a&&c>0,!1}});var me=function Ne(t,e,n){_e.call(this,t,e,n,1,1),this.$class=Ne};me[S]=Merge(Extend(_e[S]),{constructor:me,get:function(t,e){var n,r,i,s,l,o=this,u=o.ts,c=u.length;if(o.REQ=1,o.ERR=0,o.MTCH=0,i=t.pos,s=e.stack.pos(),n=u[0].clone().req(1),r=n.get(t,e),l=o.id+"_"+getId(),!1!==r){if(!0!==r)for(var a=c-1;a>0;a--)e.stack.pushAt(s+c-a-1,u[a].clone().req(1),"sID",l);return o.MTCH=n.MTCH,r}return n.ERR?(o.ERR=1,t.bck2(i)):n.REQ&&(o.ERR=1),!1}});var Re=function(t,e,n){_e.call(this,t,e,n,1,1),this.$class=Re};Re[S]=Merge(Extend(_e[S]),{constructor:Re,get:function(t,e){var n,r,i,s,l,o,u=this,c=u.ts,a=c.length;if(u.REQ=0,u.ERR=0,u.MTCH=0,i=t.pos,s=e.stack.pos(),n=c[0].clone().req(0),r=n.get(t,e),l=u.id+"_"+getId(),!1!==r){if(!0!==r)for(o=a-1;o>0;o--)e.stack.pushAt(s+a-o-1,c[o].clone().req(1),"sID",l);return u.MTCH=n.MTCH,r}return n.ERR&&t.bck2(i),!1}});var ve=function(t,e,n,i,s,l,o,u,g,C,b){var M,S,O,D,P,I,N,A,L,H,j,$,q,V,F,G=null;if(null===t)return new de(a,"EOL",t);if(""===t)return new de(p,"NONSPACE",t);if(!1===t||0===t)return new de(f,"EMPTY",t);if(t=""+t,!u[t]&&(M=n[t]||i[t]||{type:"simple",tokens:t})){for((B|Q)&get_type(M)&&(M={type:"simple",tokens:M});M.extend;)V=M.extend,F=n[V]||i[V],delete M.extend,F&&((B|Q)&get_type(F)&&(F={type:"simple",tokens:F}),M=extend(F,M));if(S=M.type?w[M.type.toUpperCase().replace(/[\-_]/g,"")]:c,c&S){if(""===M.tokens)return G=new de(p,t,t),u[t]=G,G;if(null===M.tokens)return G=new de(a,t,t),u[t]=G,G;if(!1===M.tokens||0===M.tokens)return G=new de(f,t,t),u[t]=G,G}if(M.tokens=make_array(M.tokens),c&S)M.autocomplete&&xe(M,t,b),D=null,M.push?D=[he,M.push]:"undefined"!=typeof M.pop&&(D=[ge,M.pop]),O="undefined"==typeof M.combine?"\\b":M.combine,G=new de(c,t,pe(t,M.tokens.slice(),e,O,l,o)),G.ta=D,u[t]=G;else if(h&S)d&S&&ye(M,C),G=new ke(S,t,fe(t,M.tokens.slice(),e,l,o),M.multiline,M.escape,s[t+".inside"]?1:0),u[t]=G,M.interleave&&g.push(G.clone());else if(y&S){for(I=M.tokens.slice(),Q&get_type(M.match)?G=new _e(E,t,null,M.match[0],M.match[1]):(P=T[M.match.toUpperCase()],G=m===P?new _e(m,t,null,0,1):R===P?new _e(R,t,null,0,r):v===P?new _e(v,t,null,1,r):k&P?new Ee(k,t,null):new me(_,t,null)),u[t]=G,N=[],H=0,j=I.length;j>H;H++)N=N.concat(ve(I[H],e,n,i,s,l,o,u,g,C,b));G.set(N)}else if(x&S){for(G=make_array_2(M.tokens.slice()).slice(),A=[],H=0,j=G.length;j>H;H++)A[H]=G[H].slice(),G[H]=new Re(x,t+"_NGRAM_"+H,null);for(u[t]=G,H=0,j=G.length;j>H;H++){for(L=A[H],N=[],$=0,q=L.length;q>$;$++)N=N.concat(ve(L[$],e,n,i,s,l,o,u,g,C,b));G[H].set(N)}}}return u[t]},ye=function(t,e){var n,r,s,o=make_array_2(t.tokens.slice());for(i=0,l=o.length;l>i;i++)n=o[i][0],r=o[i].length>1?o[i][1]:o[i][0],s=o[i].length>2?o[i][2]:"",null===r?(e.line=e.line||[],e.line.push(n)):(e.block=e.block||[],e.block.push([n,r,s]))},xe=function(t,e,n){var r=[].concat(make_array(t.tokens)).map(function(t){return{word:t,meta:e}});n.autocomplete=(n.autocomplete||[]).concat(r)},Ce=function(t){var e,n,r,i,s,l,o,u,c,a,p,f,h,g,d,k;if(t.__parsed)return t;for(p={},f={},h={},d={},k={},g=[],t=clone(t),e=t.RegExpID||null,t.RegExpID=null,delete t.RegExpID,l=t.Lex||{},t.Lex=null,delete t.Lex,o=t.Syntax||{},t.Syntax=null,delete t.Syntax,s=t.Style||{},i=t.Parser||[],r=i.length,n=[],u=0;r>u;u++)c=i[u],a=ve(c,e,l,o,s,p,f,h,g,d,k)||null,a&&(Q&get_type(a)?n=n.concat(a):n.push(a));return t.Parser=n,t.cTokens=g,t.Style=s,t.Comments=d,t.Keywords=k,t.Extra=t.Extra||{},t.__parsed=1,t},be=function(t,e){var n=this;n.DEF=e.DEFAULT,n.ERR=e.ERROR,n.Tokens=t.Parser||[],n.cTokens=t.cTokens.length?t.cTokens:null,n.Style=t.Style};be[S]={constructor:be,ERR:null,DEF:null,cTokens:null,Tokens:null,Style:null,parse:function(t){t=t||"";var e,n,r=t.split(/\r\n|\r|\n/g),i=r.length,s=[];for(n={state:new ee,tokens:null},e=0;i>e;e++)n=this.getLineTokens(r[e],n.state,e),s=s.concat(n.tokens),i-1>e&&s.push("\n");return s},getLineTokens:function(t,e){var n,r,i,s,l,o,u,c,f,h,g,d=this,k=d.cTokens,_=d.Tokens,E=_.length,m=d.Style,R=d.DEF,v=d.ERR;for(o=[],h=new X(t),g=e.stack,u={type:null,content:""},c=null,f=null,!g.isEmpty()&&a==g.peek().tt&&h.sol()&&g.pop();!h.eol();)if(r=0,R==f||v==f?(u.type&&o.push(u),o.push(h.cur(1)),u={type:null,content:""}):f&&f!==u.type?(u.type&&o.push(u),u={type:f,content:h.cur(1)}):u.type&&(u.content+=h.cur(1)),f=!1,!g.isEmpty()&&p==g.peek().tt||!h.spc()){for(;!g.isEmpty()&&!h.eol();){if(k){for(s=0,i=0;s<k.length;)if(l=k[s++],e.t=c=l.get(h,e),!1!==c){f=m[c]||R,i=1;break}if(i){r=1;break}}if(l=g.pop(),e.t=c=l.get(h,e),!1!==c){if(!0!==c){f=m[c]||R,l.MTCH&&(g.empty("sID",l.sID),e.t=c=v,f=v,currentError=l.err()),r=1;break}}else{if(l.ERR||l.REQ){g.empty("sID",l.sID),h.nxt(),e.t=c=v,f=v,currentError=l.err(),r=1;break}f=!1}}if(!r){if(h.eol())break;for(n=0;E>n;n++)if(l=_[n],e.t=c=l.get(h,e),!1!==c){if(!0!==c){f=m[c]||R,l.MTCH&&(g.empty("sID",l.sID),e.t=c=v,f=v,currentError=l.err()),r=1;break}}else{if(l.ERR||l.REQ){g.empty("sID",l.sID),h.nxt(),e.t=c=v,f=v,currentError=l.err(),r=1;break}f=!1}if(!r){if(h.eol())break;h.nxt(),e.t=c=R,f=R}}}else e.t=c=R,f=R;return R==f||v==f?(u.type&&o.push(u),o.push(h.cur(1))):f&&f!==u.type?(u.type&&o.push(u),o.push({type:f,content:h.cur(1)})):u.type&&(u.content+=h.cur(1),o.push(u)),u=null,{state:e,tokens:o}}};var Te=function(t){var r={DEFAULT:e,ERROR:n};t=Ce(t);var i,s=new be(t,r),l=0,o=null,u={"before-highlight":function(t){o==t.language&&(t._code=t.code,t.code="",t.parser=s)},"before-insert":function(t){o==t.language&&(t.code=t._code,t._code="",t.highlightedCode=i.Token.stringify(t.parser.parse(t.code),t.language))}};return{hook:function(t,e){if(!l){i=t,o=e;for(var n in u)i.hooks.add(n,u[n]);l=1}},unhook:function(){if(l){var t=i.hooks.all;for(var e in u)if(t[e]){var n=t[e].indexOf(u[e]);n>-1&&t[e].splice(n,1)}l=0}}}};e="",n="";t.PrismGrammar={VERSION:"0.9",extend:extend,parse:Ce,getMode:Te};return t.PrismGrammar});