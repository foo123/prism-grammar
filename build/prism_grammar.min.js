/**
*
*   PrismGrammar
*   @version: 0.9
*
*   Transform a grammar specification in JSON format, into a syntax-highlighter for Prism
*   https://github.com/foo123/prism-grammar
*
**/!function(t,n,e){"use strict";var r,s="object"==typeof module&&module.exports,l="function"==typeof define&&define.amd;s?module.exports=(module.$deps=module.$deps||{})[n]=module.$deps[n]||e.call(t,{NODE:module})||1:l&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["require","exports","module"],function(n,r,s){return e.call(t,{AMD:s})}):n in t||(t[n]=r=e.call(t,{})||1)&&l&&define(n,[],function(){return r})}(this,"PrismGrammar",function(t){"use strict";var n,e,r=1/0,s=2,l=4,i=8,o=16,u=17,c=18,a=20,f=32,p=33,h=34,g=64,k=128,d=256,E=257,v=258,m=259,R=512,_=1024,y=2048,C=4096,b={EITHER:g,ALL:k,ZEROORONE:E,ZEROORMORE:v,ONEORMORE:m,REPEATED:d},T={INDENT:y,DEDENT:C,BLOCK:f,COMMENT:h,ESCAPEDBLOCK:p,SIMPLE:o,GROUP:R,NGRAM:_},w=void 0,x="prototype",S="hasOwnProperty",M="propertyIsEnumerable",O=(Object.keys,Array[x],Object[x]),D=(Function[x],O.toString),A=4,N=5,I=8,P=16,H=17,L=18,j=32,B=64,Q=128,$=256,q=512,V=1024,F=2048,G=P|j,K=B|j,U={"[object Array]":j,"[object RegExp]":$,"[object Number]":A,"[object String]":P,"[object Function]":Q,"[object Object]":B},Z=function(t){var n;return null===t?q:!0===t||!1===t?I:w===t?V:(n=D.call(t),n=U[n]||F,A===n||t instanceof Number?isNaN(t)?N:A:P===n||t instanceof String?1===t.length?H:P:j===n||t instanceof Array?j:$===n||t instanceof RegExp?$:Q===n||t instanceof Function?Q:B===n?B:F)},z=Object.create,W=function(){var t,n,e,r,s,l,i,o=arguments;for(n=o[0]||{},t=o.length,l=1;t>l;l++)if(e=o[l],B===Z(e))for(s in e)e[S](s)&&e[M](s)&&(r=e[s],i=Z(r),n[s]=A&i?0+r:G&i?r.slice(0):r);return n},Y=function(t,n){return n||j!==Z(t)?[t]:t},J=function(t,n){return t=Y(t,n),(n||j!==Z(t[0]))&&(t=[t]),t},X=function(t){var n,e=Z(t);if(!(K&e))return t;var r,s={};for(r in t)t[S](r)&&t[M](r)&&(n=Z(t[r]),s[r]=B&n?X(t[r]):G&n?t[r].slice():t[r]);return s},tn=function(){var t=arguments,n=t.length;if(1>n)return null;if(2>n)return X(t[0]);var e,r,s,l,i=t[0],o=X(i);for(n--,r=1;n>r;r++)if(e=t[r])for(s in e)e[S](s)&&e[M](s)&&(i[S](s)&&i[M](s)?(l=Z(i[s]),B&~P&l&&(o[s]=tn(i[s],e[s]))):o[s]=X(e[s]));return o},nn=function(t){return t.replace(/([.*+?^${}()|[\]\/\\\-])/g,"\\$1")},en=function(t,n){var e,r,s,l;for(l=function(t,e){return n[1+parseInt(e,10)]},e=t.split("$$"),s=e.length,r=0;s>r;r++)e[r]=e[r].replace(/\$(\d{1,2})/g,l);return e.join("$")},rn=function(t,n){return n.length-t.length},sn=function(t,n){return P&Z(n)&&P&Z(t)&&n.length&&n.length<=t.length&&n==t.substr(0,n.length)},ln=function(t,n,e){if(!t||A==Z(t))return t;var r,s=n?n.length||0:0;if(s&&n==t.substr(0,s)){var l,i,o,u,r,c,a=t.substr(s),f=a[0],p="";for(r=a.length;r--&&(c=a[r],f!=c);)"i"==c.toLowerCase()&&(p="i");return l=a.substring(1,r),i="^("+l+")",e[i]||(o=new RegExp(i,p),u={peek:null,negativepeek:null},e[i]=[o,u]),e[i]}return t},on=function(t,n){var e={},r="",s=Z(n);(P==s||H==s)&&(r=n);var l=t.sort(rn).map(function(t){return e[t.charAt(0)]=1,nn(t)}).join("|");return[new RegExp("^("+l+")"+r),{peek:e,negativepeek:null},1]},un=0,cn=function(){return++un},an="undefined"!=typeof global&&"[object global]"=={}.toString.call(global)?1:0,fn=an||"undefined"==typeof navigator?0:1,pn="function"==typeof importScripts&&navigator instanceof WorkerNavigator?1:0,hn=function(){var t,n,e=null;return an?(e=__filename,{path:__dirname,file:__filename,base:__dirname}):(pn?e=self.location.href:fn&&(t=document.location.href.split("#")[0].split("?")[0].split("/").slice(0,-1).join("/"),(n=document.getElementsByTagName("script"))&&n.length&&(e=n[n.length-1].src)),e?{path:e.split("/").slice(0,-1).join("/"),file:e,base:t}:{path:null,file:null,base:null})},gn=(hn(),Math.max),kn=/^[\s\u00a0]+/,dn=/[^\s\u00a0]/,En=function(t,n,e,r,s){var l,i;for(null===n&&(n=t.search(dn),-1==n&&(n=t.length)),l=r||0,i=s||0;n>l;++l)i+="	"==t.charAt(l)?e-i%e:1;return i},vn=function(t){var n=this;n._=null,n.s=t?""+t:"",n.start=n.pos=0,n.lCP=n.lCV=0,n.lS=0};vn[x]={constructor:vn,_:null,s:"",start:0,pos:0,lCP:0,lCV:0,lS:0,toString:function(){return this.s},fromStream:function(t){var n=this;return n._=t,n.s=""+t.string,n.start=t.start,n.pos=t.pos,n.lCP=t.lastColumnPos,n.lCV=t.lastColumnValue,n.lS=t.lineStart,n},sol:function(){return 0==this.pos},eol:function(){return this.pos>=this.s.length},chr:function(t,n){var e=this,r=e.s.charAt(e.pos)||null;return r&&t==r?(!1!==n&&(e.pos+=1,e._&&(e._.pos=e.pos)),r):!1},chl:function(t,n){var e=this,r=e.s.charAt(e.pos)||null;return r&&-1<t.indexOf(r)?(!1!==n&&(e.pos+=1,e._&&(e._.pos=e.pos)),r):!1},str:function(t,n,e){var r,s=this,l=s.pos,i=s.s,o=i.charAt(l)||null;return o&&n[o]&&(r=t.length,t==i.substr(l,r))?(!1!==e&&(s.pos+=r,s._&&(s._.pos=s.pos)),t):!1},rex:function(t,n,e,r,s){{var l,i=this,o=i.pos,u=i.s;u.charAt(o)||null}return l=u.slice(o).match(t),!l||l.index>0?!1:(!1!==s&&(i.pos+=l[r||0].length,i._&&(i._.pos=i.pos)),l)},spc:function(t){var n,e=this,r=e.pos,s=e.s.slice(r);return(n=s.match(kn))?(!1!==t&&(e.pos+=n[0].length,e._&&(e._.pos=e.pos)),1):0},end:function(){var t=this;return t.pos=t.s.length,t._&&(t._.pos=t.pos),t},nxt:function(){var t,n=this,e=n.s;return n.pos<e.length?(t=e.charAt(n.pos++)||null,n._&&(n._.pos=n.pos),t):void 0},bck:function(t){var n=this;return n.pos=gn(0,n.pos-t),n._&&(n._.pos=n.pos),n},bck2:function(t){var n=this;return n.pos=gn(0,t),n._&&(n._.pos=n.pos),n},col:function(t){var n=this;return t=t||1,n.lCP<n.start&&(n.lCV=En(n.s,n.start,t,n.lCP,n.lCV),n.lCP=n.start,n._&&(n._.start=n.start,n._.lastColumnPos=n.lCP,n._.lastColumnValue=n.lCV,n._.lineStart=n.lS)),n.lCV-(n.lS?En(n.s,n.lS,t):0)},ind:function(t){var n=this;return t=t||1,En(n.s,null,t)-(n.lS?En(n.s,n.lS,t):0)},cur:function(t){var n=this,e=n.s.slice(n.start,n.pos);return t&&(n.start=n.pos),e},sft:function(){return this.start=this.pos,this}};var mn=function(t){this._=t||[]};mn[x]={constructor:mn,_:null,toString:function(){var t=this._.slice();return t.reverse().join("\n")},clone:function(){return new mn(this._.slice())},isEmpty:function(){return 0>=this._.length},pos:function(){return this._.length},peek:function(t){var n=this._;if(t="undefined"==typeof t?-1:t,n.length){if(0>t&&0<=n.length+t)return n[n.length+t];if(t>=0&&t<n.length)return n[t]}return null},pop:function(){return this._.pop()},shift:function(){return this._.shift()},push:function(t){return this._.push(t),this},unshift:function(t){return this._.unshift(t),this},pushAt:function(t,n,e,r){var s=this._;return e&&r&&(n[e]=r),t<s.length?s.splice(t,0,n):s.push(n),this},empty:function(t,n){{var e=this._;e.length}if(t&&n)for(;e.length&&e[e.length-1]&&e[e.length-1][t]==n;)e.pop();else e.length=0;return this}};var Rn=function(t,n){var e=this;e.id=n?(new Date).getTime():0,e.l=t||0,e.stack=new mn,e.data=new mn,e.col=0,e.indent=0,e.t=null,e.inBlock=null,e.endBlock=null};Rn[x]={constructor:Rn,id:0,l:0,col:0,indent:0,stack:null,data:null,t:null,inBlock:null,endBlock:null,clone:function(t){var n=this,e=new Rn(n.l,t);return e.t=n.t,e.col=n.col,e.indent=n.indent,e.stack=n.stack.clone(),e.data=n.data.clone(),e.inBlock=n.inBlock,e.endBlock=n.endBlock,e},toString:function(){var t=this;return["",t.id,t.l,t.t,t.inBlock||"0"].join("_")}};var _n=function(t,n){var e,r=this;return(e=t.chr(r.tp,n))?[r.tk,e]:!1},yn=function(t,n){var e,r=this;return(e=t.chl(r.tp,n))?[r.tk,e]:!1},Cn=function(t,n){var e,r=this;return(e=t.str(r.tp,r.p,n))?[r.tk,e]:!1},bn=function(t,n){var e,r=this;return(e=t.rex(r.tp,r.p,r.np,r.tg,n))?[r.tk,e]:!1},Tn=function(t,n){var e=this;return!1!==n&&t.end(),[e.tk,""]},wn=function Kn(t,n,e,r){var l=this;switch(l.$class=Kn,l.mt=s,l.tt=t||H,l.tn=n,l.tk=r||0,l.tg=0,l.tp=null,l.p=null,l.np=null,l.tt){case H:case L:l.tp=e,l.get=L===l.tt?yn:_n;break;case P:l.tp=e,l.p={},l.p[""+e.charAt(0)]=1,l.get=Cn;break;case $:l.tp=e[0],l.p=e[1].peek||null,l.np=e[1].negativepeek||null,l.tg=e[2]||0,l.get=bn;break;case q:l.tp=null,l.get=Tn}};wn[x]={constructor:wn,$class:null,mt:null,tt:null,tn:null,tp:null,tg:0,tk:0,p:null,np:null,get:function(){return!1},toString:function(){return["[","Matcher: ",this.tn,", Pattern: ",this.tp?this.tp.toString():null,"]"].join("")}};var xn=function Un(t,n,e){var r=this;r.$class=Un,r.mt=l,r.tn=t,r.ms=n,r.ownKey=!1!==e};xn[x]=W(z(wn[x]),{constructor:xn,ms:null,ownKey:!0,get:function(t,n){var e,r,s=this.ms,l=s.length,i=this.ownKey;for(e=0;l>e;e++)if(r=s[e].get(t,n))return i?[e,r[1]]:r;return!1}});var Sn=function Zn(t,n,e){var r=this;r.$class=Zn,r.mt=i,r.tn=t,r.s=new xn(r.tn+"_Start",n,!1),r.e=e};Sn[x]=W(z(wn[x]),{constructor:Sn,s:null,e:null,get:function(t,n){var e,r=this,s=r.s,l=r.e;if(e=s.get(t,n)){var i,o=l[e[0]],u=Z(o),c=s.ms[e[0]].tt;return $==c&&(A==u?(i=e[1][o+1],o=new wn(i.length>1?P:H,r.tn+"_End",i)):P==u&&(i=en(o,e[1]),o=new wn(i.length>1?P:H,r.tn+"_End",i))),o}return!1}});var Mn=function(t,n,e,r){var s=Z(n);if(A==s)return n;if(!r[t]){e=e||0;var l,i=0;n&&n.isCharList&&(i=1,delete n.isCharList),l=q&s?new wn(q,t,n,e):H==s?new wn(H,t,n,e):P&s?i?new wn(L,t,n,e):new wn(P,t,n,e):j&s?new wn($,t,n,e):n,r[t]=l}return r[t]},On=function(t,n,e,r,s,l){if(!l[t]){var i,o,u,c,a,f,p,h=0,g=0,k=1;if(i=Y(n),u=i.length,1==u)p=Mn(t,ln(i[0],e,s),0,l);else if(u>1){for(c=(u>>1)+1,o=0;c>=o;o++)a=Z(i[o]),f=Z(i[u-1-o]),(H!=a||H!=f)&&(k=0),j&a||j&f?h=1:(sn(i[o],e)||sn(i[u-1-o],e))&&(g=1);if(!k||r&&P&Z(r))if(!r||h||g){for(o=0;u>o;o++)i[o]=j&Z(i[o])?On(t+"_"+o,i[o],e,r,s,l):Mn(t+"_"+o,ln(i[o],e,s),o,l);p=u>1?new xn(t,i):i[0]}else p=Mn(t,on(i,r),0,l);else i=i.slice().join(""),i.isCharList=1,p=Mn(t,i,0,l)}l[t]=p}return l[t]},Dn=function(t,n,e,r,s){if(!s[t]){var l,i,o,u,c,a,f;for(u=[],c=[],l=J(n),i=0,o=l.length;o>i;i++)a=Mn(t+"_0_"+i,ln(l[i][0],e,r),i,s),f=l[i].length>1?$!=a.tt||P!=Z(l[i][1])||sn(l[i][1],e)?Mn(t+"_1_"+i,ln(l[i][1],e,r),i,s):l[i][1]:a,u.push(a),c.push(f);s[t]=new Sn(t,u,c)}return s[t]},An=1,Nn=2,In=function zn(t,n,e){var r=this;r.$class=zn,r.tt=t||o,r.id=n,r.tk=e,r.REQ=0,r.ERR=0,r.MTCH=0,r.CLONE=["tk"]};In[x]={constructor:In,$class:null,sID:null,id:null,tt:null,tk:null,ta:null,REQ:0,ERR:0,MTCH:0,CLONE:null,act:function(t,n){var e,r,s=this.ta||null,l=n.data;if(s)if(e=s[1],An===s[0]&&e)t&&(r=Z(e),e=A==r?t[1][e]:en(e,t[1])),l.push(e);else if(Nn===s[0])if(e){if(t&&(r=Z(e),e=A==r?t[1][e]:en(e,t[1])),l.isEmpty()||e!==l.peek())return e;l.pop()}else l.length&&l.pop();return 0},get:function(t,n){var e=this,r=e.tm,s=e.tk,l=e.tt,i=e.id,o=null;if(e.MTCH=0,a===l)return e.ERR=0,e.REQ=0,!0;if(u===l){if(t.spc(),t.eol())return i}else if(c===l)e.ERR=e.REQ&&t.spc()&&!t.eol()?1:0,e.REQ=0;else if(o=s.get(t))return r&&(e.MTCH=e.act(o,n)),i;return!1},req:function(t){return this.REQ=t?1:0,this},err:function(){var t=this;return t.REQ?'Token "'+t.id+'" Expected':t.MTCH?'Token "'+t.MTCH+'" No Match':'Syntax Error: "'+t.id+'"'},clone:function(){var t,n,e,r=this,s=r.CLONE;if(t=new r.$class,t.tt=r.tt,t.id=r.id,t.tm=r.tm?r.tm.slice():r.tm,s&&s.length)for(n=0,e=s.length;e>n;n++)t[s[n]]=r[s[n]];return t},toString:function(){return["[","Tokenizer: ",this.id,", Matcher: ",this.tk?this.tk.toString():null,"]"].join("")}};var Pn=function Wn(t,n,e,r,s,l){var i=this;i.$class=Wn,i.tt=t,i.id=n,i.tk=e,i.REQ=0,i.ERR=0,i.MTCH=0,i.mline="undefined"==typeof r?1:r,i.esc=s||"\\",i.inter=l,i.CLONE=["tk","mline","esc","inter"]};Pn[x]=W(z(In[x]),{constructor:Pn,inter:0,mline:0,esc:null,get:function(t,n){var e,r,s,l,i,o,u,c,a,f=this,g=0,k=0,d="",E=f.mline,v=f.tk,m=f.id,R=f.tt,_=f.inter,y=_?m+".inside":m,C=0,b=p==R,T=f.esc;if(h===R&&(f.REQ=0),i=0,n.inBlock===m?(k=1,e=n.endBlock,i=1,o=y):!n.inBlock&&(e=v.get(t))&&(k=1,n.inBlock=m,n.endBlock=e,o=m),k){if(s=n.stack.pos(),l=q===e.tt,_){if(i&&l&&t.sol())return f.REQ=0,n.inBlock=null,n.endBlock=null,!1;if(!i)return n.stack.pushAt(s,f.clone(),"sID",m),o}if(g=e.get(t),r=E,a=0,g)o=l?y:m;else for(c=t.pos;!t.eol();){if(u=t.pos,!(b&&C||!e.get(t))){_&&t.pos>u&&u>c?(o=y,t.bck2(u),a=1):(o=m,g=1);break}d=t.nxt(),C=!C&&d==T}return r=E||b&&C,g||!r&&!a?(n.inBlock=null,n.endBlock=null):n.stack.pushAt(s,f.clone(),"sID",m),o}return!1}});var Hn=function Yn(t,n,e,s,l){var i=this;i.$class=Yn,i.tt=t||d,i.id=n||null,i.tk=null,i.ts=null,i.min=s||0,i.max=l||r,i.found=0,i.CLONE=["ts","min","max","found"],e&&i.set(e)};Hn[x]=W(z(In[x]),{constructor:Hn,ts:null,min:0,max:1,found:0,set:function(t){return t&&(this.ts=Y(t)),this},get:function(t,n){var e,r,s,l,i,o,u=this,c=u.ts,a=c.length,f=u.found,p=u.min,h=u.max,g=0;for(u.ERR=0,u.REQ=0,u.MTCH=0,l=t.pos,i=n.stack.pos(),o=u.id+"_"+cn(),e=0;a>e;e++){if(r=c[e].clone().req(1),s=r.get(t,n),!1!==s){if(++f,h>=f)return u.found=f,n.stack.pushAt(i,u.clone(),"sID",o),u.found=0,u.MTCH=r.MTCH,s;break}r.REQ&&g++,r.ERR&&t.bck2(l)}return u.REQ=p>f,u.ERR=f>h||p>f&&g>0,!1}});var Ln=function Jn(t,n,e){Hn.call(this,t,n,e,1,1),this.$class=Jn};Ln[x]=W(z(Hn[x]),{constructor:Ln,get:function(t,n){var e,r,s,l,i=this,o=i.ts,u=o.length,c=0,a=0;for(i.REQ=1,i.ERR=0,i.MTCH=0,l=t.pos,s=0;u>s;s++){if(r=o[s].clone().req(1),e=r.get(t,n),c+=r.REQ?1:0,!1!==e)return i.MTCH=r.MTCH,e;r.ERR&&(a++,t.bck2(l))}return i.REQ=c>0,i.ERR=u==a&&c>0,!1}});var jn=function Xn(t,n,e){Hn.call(this,t,n,e,1,1),this.$class=Xn};jn[x]=W(z(Hn[x]),{constructor:jn,get:function(t,n){var e,r,s,l,i,o=this,u=o.ts,c=u.length;if(o.REQ=1,o.ERR=0,o.MTCH=0,s=t.pos,l=n.stack.pos(),e=u[0].clone().req(1),r=e.get(t,n),i=o.id+"_"+cn(),!1!==r){if(!0!==r)for(var a=c-1;a>0;a--)n.stack.pushAt(l+c-a-1,u[a].clone().req(1),"sID",i);return o.MTCH=e.MTCH,r}return e.ERR?(o.ERR=1,t.bck2(s)):e.REQ&&(o.ERR=1),!1}});var Bn=function(t,n,e){Hn.call(this,t,n,e,1,1),this.$class=Bn};Bn[x]=W(z(Hn[x]),{constructor:Bn,get:function(t,n){var e,r,s,l,i,o,u=this,c=u.ts,a=c.length;if(u.REQ=0,u.ERR=0,u.MTCH=0,s=t.pos,l=n.stack.pos(),e=c[0].clone().req(0),r=e.get(t,n),i=u.id+"_"+cn(),!1!==r){if(!0!==r)for(o=a-1;o>0;o--)n.stack.pushAt(l+a-o-1,c[o].clone().req(1),"sID",i);return u.MTCH=e.MTCH,r}return e.ERR&&t.bck2(s),!1}});var Qn=function(t,n,e,s,l,i,p,y,C,w,x){var S,M,O,D,A,N,I,H,L,B,Q,$,q,V,F,G=null;if(null===t)return new In(u,"EOL",t);if(""===t)return new In(c,"NONSPACE",t);if(!1===t||0===t)return new In(a,"EMPTY",t);if(t=""+t,!y[t]&&(S=e[t]||s[t]||{type:"simple",tokens:t})){for((P|j)&Z(S)&&(S={type:"simple",tokens:S});S.extend;)V=S.extend,F=e[V]||s[V],delete S.extend,F&&((P|j)&Z(F)&&(F={type:"simple",tokens:F}),S=tn(F,S));if(M=S.type?T[S.type.toUpperCase().replace(/[\-_]/g,"")]:o,o&M){if(""===S.tokens)return G=new In(c,t,t),y[t]=G,G;if(null===S.tokens)return G=new In(u,t,t),y[t]=G,G;if(!1===S.tokens||0===S.tokens)return G=new In(a,t,t),y[t]=G,G}if(S.tokens=Y(S.tokens),o&M)S.autocomplete&&qn(S,t,x),D=null,S.push?D=[An,S.push]:"undefined"!=typeof S.pop&&(D=[Nn,S.pop]),O="undefined"==typeof S.combine?"\\b":S.combine,G=new In(o,t,On(t,S.tokens.slice(),n,O,i,p)),G.ta=D,y[t]=G;else if(f&M)h&M&&$n(S,w),G=new Pn(M,t,Dn(t,S.tokens.slice(),n,i,p),S.multiline,S.escape,l[t+".inside"]?1:0),y[t]=G,S.interleave&&C.push(G.clone());else if(R&M){for(N=S.tokens.slice(),j&Z(S.match)?G=new Hn(d,t,null,S.match[0],S.match[1]):(A=b[S.match.toUpperCase()],G=E===A?new Hn(E,t,null,0,1):v===A?new Hn(v,t,null,0,r):m===A?new Hn(m,t,null,1,r):g&A?new Ln(g,t,null):new jn(k,t,null)),y[t]=G,I=[],B=0,Q=N.length;Q>B;B++)I=I.concat(Qn(N[B],n,e,s,l,i,p,y,C,w,x));G.set(I)}else if(_&M){for(G=J(S.tokens.slice()).slice(),H=[],B=0,Q=G.length;Q>B;B++)H[B]=G[B].slice(),G[B]=new Bn(_,t+"_NGRAM_"+B,null);for(y[t]=G,B=0,Q=G.length;Q>B;B++){for(L=H[B],I=[],$=0,q=L.length;q>$;$++)I=I.concat(Qn(L[$],n,e,s,l,i,p,y,C,w,x));G[B].set(I)}}}return y[t]},$n=function(t,n){var e,r,s,l,i,o=J(t.tokens.slice());for(l=0,i=o.length;i>l;l++)e=o[l][0],r=o[l].length>1?o[l][1]:o[l][0],s=o[l].length>2?o[l][2]:"",null===r?(n.line=n.line||[],n.line.push(e)):(n.block=n.block||[],n.block.push([e,r,s]))},qn=function(t,n,e){var r=[].concat(Y(t.tokens)).map(function(t){return{word:t,meta:n}});e.autocomplete=(e.autocomplete||[]).concat(r)},Vn=function(t){var n,e,r,s,l,i,o,u,c,a,f,p,h,g,k,d;if(t.__parsed)return t;for(f={},p={},h={},k={},d={},g=[],t=X(t),n=t.RegExpID||null,t.RegExpID=null,delete t.RegExpID,i=t.Lex||{},t.Lex=null,delete t.Lex,o=t.Syntax||{},t.Syntax=null,delete t.Syntax,l=t.Style||{},s=t.Parser||[],r=s.length,e=[],u=0;r>u;u++)c=s[u],a=Qn(c,n,i,o,l,f,p,h,g,k,d)||null,a&&(j&Z(a)?e=e.concat(a):e.push(a));return t.Parser=e,t.cTokens=g,t.Style=l,t.Comments=k,t.Keywords=d,t.Extra=t.Extra||{},t.__parsed=1,t},Fn=function(t,n){var e=this;e.DEF=n.DEFAULT,e.ERR=n.ERROR,e.Tokens=t.Parser||[],e.cTokens=t.cTokens.length?t.cTokens:null,e.Style=t.Style};Fn[x]={constructor:Fn,ERR:null,DEF:null,cTokens:null,Tokens:null,Style:null,parse:function(t){t=t||"";var n,e,r=t.split(/\r\n|\r|\n/g),s=r.length,l=[];for(e={state:new Rn,tokens:null},n=0;s>n;n++)e=this.getLineTokens(r[n],e.state,n),l=l.concat(e.tokens),s-1>n&&l.push("\n");return l},getLineTokens:function(t,n){var e,r,s,l,i,o,a,f,p,h,g,k=this,d=k.cTokens,E=k.Tokens,v=E.length,m=k.Style,R=k.DEF,_=k.ERR;for(o=[],h=new vn(t),g=n.stack,a={type:null,content:""},f=null,p=null,!g.isEmpty()&&u==g.peek().tt&&h.sol()&&g.pop();!h.eol();)if(r=0,R==p||_==p?(a.type&&o.push(a),o.push(h.cur(1)),a={type:null,content:""}):p&&p!==a.type?(a.type&&o.push(a),a={type:p,content:h.cur(1)}):a.type&&(a.content+=h.cur(1)),p=!1,!g.isEmpty()&&c==g.peek().tt||!h.spc()){for(;!g.isEmpty()&&!h.eol();){if(d){for(l=0,s=0;l<d.length;)if(i=d[l++],n.t=f=i.get(h,n),!1!==f){p=m[f]||R,s=1;break}if(s){r=1;break}}if(i=g.pop(),n.t=f=i.get(h,n),!1!==f){if(!0!==f){p=m[f]||R,i.MTCH&&(g.empty("sID",i.sID),n.t=f=_,p=_,currentError=i.err()),r=1;break}}else{if(i.ERR||i.REQ){g.empty("sID",i.sID),h.nxt(),n.t=f=_,p=_,currentError=i.err(),r=1;break}p=!1}}if(!r){if(h.eol())break;for(e=0;v>e;e++)if(i=E[e],n.t=f=i.get(h,n),!1!==f){if(!0!==f){p=m[f]||R,i.MTCH&&(g.empty("sID",i.sID),n.t=f=_,p=_,currentError=i.err()),r=1;break}}else{if(i.ERR||i.REQ){g.empty("sID",i.sID),h.nxt(),n.t=f=_,p=_,currentError=i.err(),r=1;break}p=!1}if(!r){if(h.eol())break;h.nxt(),n.t=f=R,p=R}}}else n.t=f=R,p=R;return R==p||_==p?(a.type&&o.push(a),o.push(h.cur(1))):p&&p!==a.type?(a.type&&o.push(a),o.push({type:p,content:h.cur(1)})):a.type&&(a.content+=h.cur(1),o.push(a)),a=null,{state:n,tokens:o}}};var Gn=function(t){var r={DEFAULT:n,ERROR:e};t=Vn(t);var s,l=new Fn(t,r),i=0,o=null,u={"before-highlight":function(t){o==t.language&&(t._code=t.code,t.code="",t.parser=l)},"before-insert":function(t){o==t.language&&(t.code=t._code,t._code="",t.highlightedCode=s.Token.stringify(t.parser.parse(t.code),t.language))}};return{hook:function(t,n){if(!i){s=t,o=n;for(var e in u)s.hooks.add(e,u[e]);i=1}},unhook:function(){if(i){var t=s.hooks.all;for(var n in u)if(t[n]){var e=t[n].indexOf(u[n]);e>-1&&t[n].splice(e,1)}i=0}}}};n="",e="";t.PrismGrammar={VERSION:"0.9",extend:tn,parse:Vn,getMode:Gn};return t.PrismGrammar});