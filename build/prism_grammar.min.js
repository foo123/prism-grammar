/**
*
*   PrismGrammar
*   @version: 2.0.0
*
*   Transform a grammar specification in JSON format, into a syntax-highlighter for Prism
*   https://github.com/foo123/prism-grammar
*
**/!function(e,t,n){"use strict";var r,o="object"==typeof module&&module.exports,s="function"==typeof define&&define.amd;o?module.exports=(module.$deps=module.$deps||{})[t]=module.$deps[t]||n.call(e,{NODE:module})||1:s&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["require","exports","module"],function(t,r,o){return n.call(e,{AMD:o})}):t in e||(e[t]=r=n.call(e,{})||1)&&s&&define(t,[],function(){return r})}(this,"PrismGrammar",function(e){"use strict";function t(e,t){var n=this,r=n.pattern,o=e.s.charAt(e.pos)||null;return o&&r===o?(!1!==t&&e.mov(1),[n.key,o]):!1}function n(e,t){var n=this,r=n.pattern,o=e.s.charAt(e.pos)||null;return o&&-1<r.indexOf(o)?(!1!==t&&e.mov(1),[n.key,o]):!1}function r(e,t){var n=this,r=n.pattern,o=r.length,s=e.s;return r===s.substr(e.pos,o)?(!1!==t&&e.mov(o),[n.key,r]):!1}function o(e,t){var n,r=this,o=r.pattern,s=e.s;return n=s.slice(e.pos).match(o[0]),!n||n.index>0?!1:(!1!==t&&e.mov(n[0].length),[r.key,n])}function s(e,t){var n=this;return!1!==t&&e.end(),[n.key,""]}function l(e,t,n,r){var o=$t(t);if(it===o)return t;if(r[e])return r[e];n=n||0;var s,l=0;return t&&t.isCharList&&(l=1,delete t.isCharList),s=vt&o?new Wt(e,t,vt,n):ht===o?new Wt(e,t,ht,n):ft&o?new Wt(e,t,l?mt:ft,n):(yt|gt)&o?new Wt(e,t,yt,n):t,r[e]=s}function u(e,t,n,r,o,s){if(s[e])return s[e];var i,c,a,p,f,h,m,g=0,k=0,d=1;if(i=Rt(t),a=i.length,1===a)m=l(e,Ut(i[0],n,o),0,s);else if(a>1){for(p=(a>>1)+1,c=0;p>=c;c++)f=$t(i[c]),h=$t(i[a-1-c]),(ht!==f||ht!==h)&&(d=0),gt&f||gt&h?g=1:(It(i[c],n)||It(i[a-1-c],n))&&(k=1);if(!d||r&&ft&$t(r))if(!r||g||k){for(c=0;a>c;c++)i[c]=gt&$t(i[c])?u(e+"_"+c,i[c],n,r,o,s):l(e+"_"+c,Ut(i[c],n,o),c,s);m=a>1?new en(e,i):i[0]}else m=l(e,Gt(i,r),0,s);else i=i.slice().join(""),i.isCharList=1,m=l(e,i,0,s)}return s[e]=m}function i(e,t,n,r,o){if(o[e])return o[e];var s,u,i,c,a,p,f;for(c=[],a=[],s=At(t),u=0,i=s.length;i>u;u++)p=l(e+"_0_"+u,Ut(s[u][0],n,r),u,o),f=s[u].length>1?yt!==p.ptype||ft!==$t(s[u][1])||It(s[u][1],n)?l(e+"_1_"+u,Ut(s[u][1],n,r),u,o):s[u][1]:p,c.push(p),a.push(f);return o[e]=new Xt(e,[c,a])}function c(e,t,n){var r,o,s,l,u,i,c,a,p,f,h,m;if(i=new String(Lt(e)),i.pos=0,1===i.length)f=""+e,t[f]||(t[f]={type:"simple",tokens:e}),e=f;else{for(r=[],o=[],s="",h=[];i.pos<i.length;)if(a=i.charAt(i.pos++),zt.test(a))if(s.length&&(t[s]||n[s]||(t[s]={type:"simple",tokens:s}),o.push(s),s=""),'"'===a||"'"===a){for(c=a,l="";i.pos<i.length&&c!==(a=i.charAt(i.pos++));)l+=a;l.length?(f=""+l,t[f]||(t[f]={type:"simple",tokens:l}),o.push(f)):o.push(0)}else if("*"===a||"+"===a||"?"===a)p=o.pop(),f=""+p+a,n[f]||(n[f]={type:"group",match:"*"===a?"zeroOrMore":"+"===a?"oneOrMore":"zeroOrOne",tokens:[p]}),o.push(f);else if("{"===a){for(u="";i.pos<i.length&&"}"!==(a=i.charAt(i.pos++));)u+=a;u=u.split(",").map(Lt),u[0]=u[0].length?parseInt(u[0],10)||0:0,0>u[0]&&(u[0]=0),2>u.length?u.push(u[0]):u[1]=u[1].length?parseInt(u[1],10)||w:w,0>u[1]&&(u[1]=0),p=o.pop(),f=""+p+["{",u[0],",",isFinite(u[1])?u[1]:"","}"].join(""),n[f]||(n[f]={type:"group",match:[u[0],u[1]],tokens:[p]}),o.push(f)}else{if("}"===a)continue;if("["===a){for(l="";i.pos<i.length&&"]"!==(a=i.charAt(i.pos++));)l+=a;f="["+l+"]",t[f]||(t[f]={type:"simple",tokens:l.split("")}),o.push(f)}else{if("]"===a)continue;"|"===a?(o.length>1?(f=""+o.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:o}),r.push(f)):o.length&&r.push(o[0]),o=[]):"("===a?(h.push([o,r,s]),o=[],r=[],s=""):")"===a&&(o.length>1?(f=""+o.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:o}),r.push(f)):o.length&&r.push(o[0]),o=[],r.length>1?(f=""+r.join(" | "),n[f]||(n[f]={type:"group",match:"either",tokens:r})):r.length&&(f=r[0]),r=[],m=h.pop(),o=m[0],r=m[1],s=m[2],p=f,f="("+p+")",n[f]||(n[f]=qt(t[p]||n[p])),o.push(f))}}else s+=a;s.length&&(t[s]||n[s]||(t[s]={type:"simple",tokens:s}),o.push(s)),s="",o.length>1?(f=""+o.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:o}),r.push(f)):o.length&&r.push(o[0]),o=[],r.length>1?(f=""+r.join(" | "),n[f]||(n[f]={type:"group",match:"either",tokens:r}),e=f):r.length&&(e=r[0]),r=[]}return e}function a(e,t,n,r,o,s,l,h,m,g,k){var d,y,b,v,_,E,O,T,P,D,z,B,W,nt,rt,st,lt,ut=null;if(lt=null,null===e)return new tn(L,"EOL",e,lt);if(""===e)return new tn(N,"NONSPACE",e,lt);if(!1===e||0===e)return new tn(F,"EMPTY",e,lt);if(gt&$t(e)&&(st=e,e="NGRAM_"+st.join("_"),r[e]||(r[e]={type:"ngram",tokens:st})),e=""+e,h[e])return h[e];for(n[e]?(d=n[e],Ot&$t(d)&&(d=n[e]={type:"simple",tokens:d})):d=r[e]?r[e]:e,ft&$t(d)&&(d=c(d,n,r),d=n[d]||r[d]);d.extend;)nt=d.extend,rt=n[nt]||r[nt],delete d.extend,rt&&(Ot&$t(rt)&&(rt={type:"simple",tokens:rt}),d=jt(rt,d));if("undefined"==typeof d.type&&(d[ot]("error")?(d.type="action",d.action=["error",d.error],delete d.error):d[ot]("empty")?(d.type="action",d.action=["empty",d.empty],delete d.empty):d[ot]("block-indent")?(d.type="action",d.action=["block-indent",d["block-indent"]],delete d["block-indent"]):d[ot]("indent")?(d.type="action",d.action=["indent",d.indent],delete d.indent):d[ot]("outdent")?(d.type="action",d.action=["outdent",d.outdent],delete d.outdent):d[ot]("unique")?(d.type="action",d.action=["unique",ft&$t(d.unique)?["_DEFAULT_",d.unique]:d.unique],delete d.unique):d[ot]("push")?(d.type="action",d.action=["push",d.push],delete d.push):d[ot]("pop")?(d.type="action",d.action=["pop",d.pop],delete d.pop):d.sequence||d.all?(d.type="group",d.match="sequence",d.tokens=d.sequence||d.all,d.all?delete d.all:delete d.sequence):d.either?(d.type="group",d.match="either",d.tokens=d.either,delete d.either):d.zeroOrMore?(d.type="group",d.match="zeroOrMore",d.tokens=d.zeroOrMore,delete d.zeroOrMore):d.oneOrMore?(d.type="group",d.match="oneOrMore",d.tokens=d.oneOrMore,delete d.oneOrMore):d.zeroOrOne?(d.type="group",d.match="zeroOrOne",d.tokens=d.zeroOrOne,delete d.zeroOrOne):d.comment?(d.type="comment",d.tokens=d.comment,delete d.comment):d.block?(d.type="block",d.tokens=d.block,delete d.block):d["escaped-block"]?(d.type="escaped-block",d.tokens=d["escaped-block"],delete d["escaped-block"]):d.simple?(d.type="simple",d.tokens=d.simple,delete d.simple):d.type="simple"),y=d.type?tt[d.type.toUpperCase().replace(Vt,"")]:M,lt=d.msg||null,M&y){if(""===d.tokens)return ut=new tn(N,e,e,lt),h[e]=ut,ut;if(null===d.tokens)return ut=new tn(L,e,e,lt),h[e]=ut,ut;if(!1===d.tokens||0===d.tokens)return ut=new tn(F,e,e,lt),h[e]=ut,ut}if(X&y||(d.tokens=Rt(d.tokens)),X&y)d[ot]("action")?"error"===d.action[0]?d.action[0]=$:"empty"===d.action[0]?d.action[0]=R:"block-indent"===d.action[0]?d.action[0]=j:"indent"===d.action[0]?d.action[0]=A:"outdent"===d.action[0]?d.action[0]=q:"unique"===d.action[0]?d.action[0]=S:"push"===d.action[0]?d.action[0]=x:"pop"===d.action[0]&&(d.action[0]=C):d[ot]("error")?d.action=[$,d.error]:d[ot]("empty")?d.action=[R,d.empty]:d[ot]("block-indent")?d.action=[j,d["block-indent"]]:d[ot]("indent")?d.action=[A,d.indent]:d[ot]("outdent")?d.action=[q,d.outdent]:d[ot]("unique")?d.action=[S,ft&$t(d.unique)?["_DEFAULT_",d.unique]:d.unique]:d[ot]("push")?d.action=[x,d.push]:d[ot]("pop")&&(d.action=[C,d.pop]),v=d.action.slice(),ut=new nn(X,e,v,lt),h[e]=ut;else if(M&y)d.autocomplete&&f(d,e,k),b="undefined"==typeof d.combine?"\\b":d.combine,ut=new tn(M,e,u(e,d.tokens.slice(),t,b,s,l),lt),h[e]=ut;else if(V&y)I&y&&p(d,g),ut=new rn(y,e,i(e,d.tokens.slice(),t,s,l),lt,d.multiline,d.escape,o[e+".inside"]?1:0),h[e]=ut,d.interleave&&m.push(ut.clone());else if(Y&y){for(E=d.tokens.slice(),gt&$t(d.match)?ut=new on(K,e,null,lt,d.match[0],d.match[1]):(_=et[d.match.toUpperCase()],ut=Z===_?new on(Z,e,null,lt,0,1):H===_?new on(H,e,null,lt,0,w):Q===_?new on(Q,e,null,lt,1,w):U&_?new on(U,e,null,lt):new on(G,e,null,lt)),h[e]=ut,O=[],D=0,z=E.length;z>D;D++)O=O.concat(a(E[D],t,n,r,o,s,l,h,m,g,k));ut.set(O)}else if(J&y){for(ut=At(d.tokens.slice()).slice(),T=[],D=0,z=ut.length;z>D;D++)T[D]=ut[D].slice(),ut[D]=new on(J,e+"_NGRAM_"+D,null,lt);for(h[e]=ut,D=0,z=ut.length;z>D;D++){for(P=T[D],O=[],B=0,W=P.length;W>B;B++)O=O.concat(a(P[B],t,n,r,o,s,l,h,m,g,k));ut[D].set(O)}}return h[e]}function p(e,t){var n,r,o,s,l,u=At(e.tokens.slice());for(s=0,l=u.length;l>s;s++)n=u[s][0],r=u[s].length>1?u[s][1]:u[s][0],o=u[s].length>2?u[s][2]:"",null===r?(t.line=t.line||[],t.line.push(n)):(t.block=t.block||[],t.block.push([n,r,o]))}function f(e,t,n){var r=[].concat(Rt(e.tokens)).map(function(e){return{word:e,meta:t}});n.autocomplete=(n.autocomplete||[]).concat(r)}function h(e){var t,n,r,o,s,l,u,i,c,p,f,h,m,g,k,d;if(e.__parsed)return e;for(f={},h={},m={},k={},d={},g=[],e=qt(e),t=e.RegExpID||null,e.RegExpID=null,delete e.RegExpID,l=e.Lex||{},e.Lex=null,delete e.Lex,u=e.Syntax||{},e.Syntax=null,delete e.Syntax,s=e.Style||{},o=e.Parser||[],r=o.length,n=[],i=0;r>i;i++)c=o[i],p=a(c,t,l,u,s,f,h,m,g,k,d)||null,p&&(gt&$t(p)?n=n.concat(p):n.push(p));return e.Parser=n,e.cTokens=g,e.Style=s,e.Comments=k,e.Keywords=d,e.Extra=e.Extra||{},e.__parsed=1,e}function m(e){var t,n=new un(h(e),{DEFAULT:g,ERROR:k}),r=0,o=null,s={"before-highlight":function(e){o===e.language&&(e._code=e.code,e.code="")},"before-insert":function(e){o===e.language&&(e.code=e._code,e._code="",e.highlightedCode=t.Token.stringify(n.parse(e.code,d),e.language))}};return{hook:function(e,n){if(!r){t=e,o=n;for(var l in s)s[ot](l)&&t.hooks.add(l,s[l]);r=1}},unhook:function(){if(r){var e,n,l=t.hooks.all;for(e in s)l[ot](e)&&s[ot](e)&&(n=l[e].indexOf(s[e]),n>-1&&l[e].splice(n,1));r=0,o=null,t=null}}}}var g,k,d=1,y=2,b=4,v=8,_=~b,E=~v,O=b|v,w=1/0,$=4,S=8,x=16,C=32,R=64,A=128,q=256,j=512,T=2,P=4,D=8,M=16,L=17,N=18,F=20,V=32,z=33,I=34,U=64,G=128,B=G,K=256,Z=257,H=258,Q=259,Y=512,J=1024,W=G|J,X=2048,et={EITHER:U,ALL:B,SEQUENCE:G,ZEROORONE:Z,ZEROORMORE:H,ONEORMORE:Q,REPEATED:K},tt={ACTION:X,BLOCK:V,COMMENT:I,ESCAPEDBLOCK:z,SIMPLE:M,GROUP:Y,NGRAM:J},nt=void 0,rt="prototype",ot="hasOwnProperty",st="propertyIsEnumerable",lt=(Object.keys,Array[rt],Object[rt]),ut=(Function[rt],lt.toString),it=4,ct=5,at=6,pt=8,ft=16,ht=17,mt=18,gt=32,kt=64,dt=128,yt=256,bt=512,vt=1024,_t=2048,Et=4096,Ot=ft|gt,wt={"[object Number]":it,"[object String]":ft,"[object Array]":gt,"[object RegExp]":yt,"[object Date]":bt,"[object Function]":dt,"[object Object]":kt},$t=function(e){if(null===e)return vt;if(!0===e||!1===e||e instanceof Boolean)return pt;if(nt===e)return _t;var t=wt[ut.call(e)]||Et;return it===t||e instanceof Number?isNaN(e)?at:isFinite(e)?it:ct:ft===t||e instanceof String?1===e.length?ht:ft:gt===t||e instanceof Array?gt:yt===t||e instanceof RegExp?yt:bt===t||e instanceof Date?bt:dt===t||e instanceof Function?dt:kt===t?kt:Et},St=function(){var e,t,n,r,o,s,l=arguments,u=l.length;for(e=l[0]||{},o=1;u>o;o++)if(t=l[o],kt===$t(t))for(r in t)t[ot](r)&&t[st](r)&&(n=t[r],s=$t(n),e[r]=it&s?0+n:bt&s?new Date(n):Ot&s?n.slice():n);return e},xt=Object.create,Ct=function(e,t){var n,r=arguments.length,o="constructor";return 0===r?(e=Object,t={}):1===r?(t=e||{},e=Object):(e=e||Object,t=t||{}),t[ot](o)||(t[o]=function(){}),n=t[o],delete t[o],n[rt]=St(xt(e[rt]),t),n[rt][o]=n,n},Rt=function(e,t){return t||gt!==$t(e)?[e]:e},At=function(e,t){return e=Rt(e),(t||gt!==$t(e[0]))&&(e=[e]),e},qt=function(e,t){var n,r,o,s,l=$t(e),u=0;if(it===$t(t)?t>0?(u=t,t=!0):t=!1:t=!1!==t,kt===l){r={};for(o in e)e[ot](o)&&e[st](o)&&(n=$t(e[o]),r[o]=kt===n?t?qt(e[o],u>0?u-1:t):e[o]:gt===n?t?qt(e[o],u>0?u-1:t):e[o].slice():bt&n?new Date(e[o]):ft&n?e[o].slice():it&n?0+e[o]:e[o])}else if(gt===l)for(s=e.length,r=new Array(s),o=0;s>o;o++)n=$t(e[o]),r[o]=kt===n?t?qt(e[o],u>0?u-1:t):e[o]:gt===n?t?qt(e[o],u>0?u-1:t):e[o].slice():bt&n?new Date(e[o]):ft&n?e[o].slice():it&n?0+e[o]:e[o];else r=bt&l?new Date(e):ft&l?e.slice():it&l?0+e:e;return r},jt=function(){var e,t,n,r,o,s,l,u,i,c,a=arguments,p=a.length;if(1>p)return null;for(t=qt(a[0]),n=1;p>n;n++)if(e=a[n])for(r in e)if(e[ot](r)&&e[st](r))if(t[ot](r)&&t[st](r)){if(i=$t(t[r]),c=$t(e[r]),kt===i&&kt===c)t[r]=jt(t[r],e[r]);else if(gt===i&&gt===c){if(l=t[r],u=e[r],s=u.length,!s)continue;if(l.length)for(o=0;s>o;o++)0>l.indexOf(u[o])&&l.push(u[o]);else t[r]=u.slice()}}else t[r]=qt(e[r]);return t},Tt=/([.*+?^${}()|[\]\/\\\-])/g,Pt=function(e){return e.replace(Tt,"\\$1")},Dt=function(e,t,n){var r,o,s,l,u,i=!0===n?0:1;for(ft&$t(t)&&(t=[t,t],i=0),o=e.length,u="",r=0;o>r;)s=e.charAt(r),o>r+1&&"$"===s?(l=e.charCodeAt(r+1),36===l?(u+="$",r+=2):l>=48&&57>=l?(u+=t[i+l-48]||"",r+=2):(u+=s,r+=1)):(u+=s,r+=1);return u},Mt=/^\s+|\s+$/g,Lt=String[rt].trim?function(e){return e.trim()}:function(e){return e.replace(Mt,"")},Nt=function(e,t){return t.length-e.length},Ft=/\r\n|\r|\n/g,Vt=/[\-_]/g,zt=/^([\[\]{}()*+?|'"]|\s)/,It=function(e,t){return ft&$t(t)&&ft&$t(e)&&t.length&&t.length<=e.length&&t==e.substr(0,t.length)},Ut=function(e,t,n){if(!e||it===$t(e))return e;var r,o=t?t.length||0:0;if(o&&t===e.substr(0,o)){var s,l,u,r,i,c=e.substr(o),a=c.charAt(0),p="";for(r=c.length;r--&&(i=c.charAt(r),a!==i);)"i"===i.toLowerCase()&&(p="i");return s=c.substring(1,r),l="^("+s+")",n[l]||(u=new RegExp(l,p),n[l]=u),n[l]}return e},Gt=function(e,t){var n,r="";return ft&$t(t)&&(r=t),n=e.sort(Nt).map(Pt).join("|"),[new RegExp("^("+n+")"+r),1]},Bt=0,Kt=function(){return++Bt},Zt=function(e){return[e||"uuid",++Bt,(new Date).getTime()].join("_")},Ht=Math.max,Qt=/^[\s\u00a0]+/,Yt=/[^\s\u00a0]/,Jt=Ct({constructor:function(e){var t=this;t._=null,t.s=e?""+e:"",t.start=t.pos=0,t.lCP=t.lCV=0,t.lS=0},_:null,s:"",start:0,pos:0,lCP:0,lCV:0,lS:0,dispose:function(){var e=this;return e._=null,e.s=null,e.start=null,e.pos=null,e.lCP=null,e.lCV=null,e.lS=null,e},toString:function(){return this.s},sol:function(){return 0===this.pos},eol:function(){return this.pos>=this.s.length},end:function(){var e=this;return e.pos=e.s.length,e},mov:function(e){var t=this;return 0>e?t.pos=Ht(0,t.pos-e):t.pos+=e,t},bck:function(e){var t=this;return t.pos=Ht(0,e),t},sft:function(){var e=this;return e.start=e.pos,e},nxt:function(){var e,t=this,n=t.s;return t.pos<n.length?e=n.charAt(t.pos++)||null:void 0},cur:function(e){var t=this,n=t.s.slice(t.start,t.pos);return e&&(t.start=t.pos),n},upd:function(){var e=this;return e._&&(e._.pos=e.pos),e},spc:function(e){var t,n=this,r=n.pos,o=n.s.slice(r);return(t=o.match(Qt))?(!1!==e&&n.mov(t[0].length),1):0},col:function(e){var t=this;return e=e||1,t.lCP<t.start&&(t.lCV=Jt.col(t.s,t.start,e,t.lCP,t.lCV),t.lCP=t.start,t._&&(t._.start=t.start,t._.lastColumnPos=t.lCP,t._.lastColumnValue=t.lCV,t._.lineStart=t.lS)),t.lCV-(t.lS?Jt.col(t.s,t.lS,e):0)},ind:function(e){var t=this;return e=e||1,Jt.col(t.s,null,e)-(t.lS?Jt.col(t.s,t.lS,e):0)}});Jt.col=function(e,t,n,r,o){var s,l;for(null===t&&(t=e.search(Yt),-1==t&&(t=e.length)),s=r||0,l=o||0;t>s;++s)l+="	"==e.charAt(s)?n-l%n:1;return l},Jt._=function(e){var t=new Jt;return t._=e,t.s=""+e.string,t.start=e.start,t.pos=e.pos,t.lCP=e.lastColumnPos,t.lCV=e.lastColumnValue,t.lS=e.lineStart,t};var Wt,Xt,en,tn,nn,rn,on,sn=Ct({constructor:function(e){this._=e||[]},_:null,dispose:function(){var e=this;return e._=null,e},toString:function(){return this._.slice().reverse().join("\n")},clone:function(){return new sn(this._.slice())},isEmpty:function(){return 0>=this._.length},pos:function(){return this._.length},peek:function(e){var t=this,n=t._;if(e=arguments.length?e:-1,n.length){if(0>e&&0<=n.length+e)return n[n.length+e];if(e>=0&&e<n.length)return n[e]}return null},pop:function(){return this._.pop()},shift:function(){return this._.shift()},push:function(e){var t=this;return t._.push(e),t},unshift:function(e){var t=this;return t._.unshift(e),t},pushAt:function(e,t,n,r){var o=this,s=o._;return n&&r&&(t[n]=r),e<s.length?s.splice(e,0,t):s.push(t),o},empty:function(e,t){var n=this,r=n._;if(e&&t)for(;r.length&&r[r.length-1]&&r[r.length-1][e]===t;)r.pop();else r.length=0;return n}}),ln=Ct({constructor:function cn(e,t,n){var r=this;r.id=t?Zt("state"):"state",e instanceof cn?(r.line=e.line,r.column=e.column,r.indent=e.indent,r.stack=e.stack.clone(),r.queu=e.queu.slice(),r.symb=qt(e.symb,1),r.token=e.token,r.block=e.block,r.errors=e.errors,r.err=e.err):(r.line=e||0,r.column=0,r.indent=null,r.token=null,r.block=null,r.stack=new sn,r.queu=[],r.symb={},r.errors=!!n,r.err=r.errors?{}:null)},id:null,line:0,column:0,indent:0,stack:null,queu:null,symb:null,err:null,errors:!1,token:null,block:null,dispose:function(){var e=this;return e.id=null,e.line=null,e.column=null,e.indent=null,e.token=null,e.block=null,e.symb=null,e.errors=null,e.err=null,e.queu=null,e.stack&&e.stack.dispose(),e.stack=null,e},clone:function(e){return new ln(this,e)},toString:function(){var e=this;return["",e.id,e.line,e.token?e.token.name:"0",e.block?e.block.name:"0"].join("_")}});Wt=Ct({constructor:function(e,l,u,i){var c=this;switch(c.type=T,c.name=e,c.pattern=null,c.ptype=u||ft,c.key=i||0,c.ptype){case vt:c.pattern=null,c.match=s;break;case yt:c.pattern=yt&$t(l)?[l,0]:[l[0],l[1]||0],c.match=o;break;case ht:case mt:c.pattern=l,c.match=mt===c.ptype?n:t;break;case ft:default:c.pattern=l,c.match=r}},type:null,name:null,pattern:null,ptype:null,key:0,dispose:function(){var e=this;return e.type=null,e.name=null,e.pattern=null,e.ptype=null,e.key=null,e},match:function(){return!1},toString:function(){var e=this;return["[","Pattern: ",e.name,", ",e.pattern?e.pattern.toString():null,"]"].join("")}}),en=Ct(Wt,{constructor:function(e,t,n){var r=this;r.type=P,r.name=e,r.pattern=t,r.key=!1!==n},match:function(e,t){var n,r,o=this,s=o.pattern,l=s.length,u=o.key;for(n=0;l>n;n++)if(r=s[n].match(e,t))return u?[n,r[1]]:r;return!1}}),Xt=Ct(Wt,{constructor:function(e,t){var n=this;n.type=D,n.name=e,n.pattern=t,n.pattern[0]=new en(n.name+"_Start",n.pattern[0],!1)},match:function(e,t){var n,r,o,s,l,u=this,i=u.pattern,c=i[0],a=i[1];return(r=c.match(e,t))?(n=a[r[0]],s=$t(n),l=c.pattern[r[0]].ptype,yt===l&&(it===s?(o=r[1][n+1],n=new Wt(u.name+"_End",o,o.length>1?ft:ht)):ft===s&&(o=Dt(n,r[1]),n=new Wt(u.name+"_End",o,o.length>1?ft:ht))),n):!1}}),tn=Ct({constructor:function(e,t,n,r){var o=this;o.type=e||M,o.name=t,o.token=n,o.status=0,o.msg=r||null,o.$msg=null,o.$clone=null},name:null,type:null,token:null,status:0,msg:null,$msg:null,$clone:null,$id:null,dispose:function(){var e=this;return e.type=null,e.name=null,e.token=null,e.status=null,e.msg=null,e.$msg=null,e.$clone=null,e.$id=null,e},clone:function(){var e,t,n,r=this,o=r.$clone;if(e=new r.constructor,e.type=r.type,e.name=r.name,e.token=r.token,e.msg=r.msg,o&&o.length)for(t=0,n=o.length;n>t;t++)e[o[t]]=r[o[t]];return e},get:function(e,t){var n=this,r=n.token,o=n.type,s=n.name,l=null;if(n.$msg=null,t.token=null,F===o)return n.status=0,!0;if(L===o){if(e.spc(),e.eol())return s}else if(N===o)n.status&b&&e.spc()&&!e.eol()&&(n.status|=v),n.status&=_;else if(l=r.match(e))return t.token={name:s,value:e.cur(),token:l[1]},s;return!1},req:function(e){var t=this;return e?t.status|=b:t.status&=_,t},err:function(e,t,n,r,o){var s,l=this,u=l.name;return s=l.$msg?l.$msg:l.status&b?'Token "'+u+'" Expected':'Syntax Error: "'+u+'"',e&&e.errors&&(e.err[t+"_"+n+"_"+r+"_"+o+"_"+u]=[t,n,r,o,s]),s},toString:function(){var e=this;return["[","Token: ",e.name,", ",e.token?e.tok.toString():null,"]"].join("")}}),nn=Ct(tn,{constructor:function(e,t,n,r){var o=this;o.type=e||X,o.name=t,o.token=n,o.status=0,o.msg=r||null,o.$msg=null,o.$clone=null},get:function(e,t){var n,r,o,s,l,u,i,c,a,p,f=this,h=f.token||null,m=t.queu,g=t.symb,k=t.token,d=t.err,y=t.errors;if(f.status=0,f.$msg=null,h){if(l=f.msg,n=h[0],r=h[1],u=t.line,c=e.pos,i=k&&k.value?c-k.value.length:i-1,$===n)return y&&(f.$msg=l?l:"Error",a=u+"_"+i+"_"+u+"_"+c+"_"+f.name,d[a]=[u,i,u,c,f.err()]),f.status|=v,!1;if(R===n)m.length=0;else if(S===n){if(k){if(o=r[1],s=r[0],o=it===$t(o)?k.token[o]:Dt(o,k.token,!0),g[ot](s)||(g[s]={}),g[s][ot](o))return y&&(f.$msg=l?Dt(l,o,!0):'Duplicate "'+o+'"',p=f.err(),a=g[s][o][0]+"_"+g[s][o][1]+"_"+g[s][o][2]+"_"+g[s][o][3]+"_"+f.name,d[a]=[g[s][o][0],g[s][o][1],g[s][o][2],g[s][o][3],p],a=u+"_"+i+"_"+u+"_"+c+"_"+f.name,d[a]=[u,i,u,c,p]),f.status|=v,!1;g[s][o]=[u,i,u,c]}}else if(C===n)if(r){if(k&&(r=it===$t(r)?k.token[r]:Dt(r,k.token)),!m.length||r!==m[0][0])return y&&(m.length?(f.$msg=l?Dt(l,[m[0][0],r],!0):'Tokens do not match "'+m[0][0]+'","'+r+'"',p=f.err(),a=m[0][1]+"_"+m[0][2]+"_"+m[0][3]+"_"+m[0][4]+"_"+f.name,d[a]=[m[0][1],m[0][2],m[0][3],m[0][4],p],a=u+"_"+i+"_"+u+"_"+c+"_"+f.name,d[a]=[u,i,u,c,p]):(f.$msg=l?Dt(l,["",r],!0):'Token does not match "'+r+'"',p=f.err(),a=u+"_"+i+"_"+u+"_"+c+"_"+f.name,d[a]=[u,i,u,c,p])),m.shift(),f.status|=v,!1;m.shift()}else m.shift();else x===n&&r&&(k&&(r=it===$t(r)?k.token[r]:Dt(r,k.token)),m.unshift([r,u,i,u,c]))}return!0}}),rn=Ct(tn,{constructor:function(e,t,n,r,o,s,l){var u=this;u.type=e,u.name=t,u.token=n,u.status=0,u.msg=r||null,u.mline="undefined"==typeof o?1:o,u.esc=s||"\\",u.inter=l,u.$msg=null,u.$clone=["mline","esc","inter"]},inter:0,mline:0,esc:null,get:function(e,t){var n,r,o,s,l,u,i,c,a,p,f,h,m,g,k=this,d=0,y=0,b="",v=k.mline,E=k.token,O=k.name,w=k.type,$=k.inter,S=$?O+".inside":O,x=0,C=z===w,R=k.esc,A="",q="",j="",T="",P=t.stack;if(k.$msg=k.msg||null,m=t.line,g=e.pos,I===w&&(k.status&=_),l=0,t.block&&t.block.name===O?(y=1,n=t.block.end,l=1,u=S,p=t.block.s,h=t.block.i,f=t.block.e,A=t.block._s,q=t.block._i,T=""):!t.block&&(n=E.match(e))&&(y=1,p=[m,g],h=[[m,e.pos],[m,e.pos]],f=[m,e.pos],A=e.cur(),q="",T="",j="",t.block={name:O,end:n,s:p,i:h,e:f,_s:A,_i:q,_e:j},u=O),y){if(o=P.pos(),s=vt===n.type,$){if(l&&s&&e.sol())return k.status&=_,t.current=null,t.block=null,!1;if(!l)return P.pushAt(o,k.clone(),"$id",O),u}if(d=n.match(e),r=v,a=0,d)u=s?S:O,j=e.cur().slice(T.length);else for(c=e.pos;!e.eol();){if(i=e.pos,!(C&&x||!n.match(e))){$&&e.pos>i&&i>c?(u=S,e.bck(i),a=1):(u=O,d=1),j=e.cur().slice(T.length);break}b=e.nxt(),T+=b,x=!x&&b===R}return r=v||C&&x,h[1]=[m,i],f=[m,e.pos],d||!r&&!a?t.block=null:(t.block.i=h,t.block.e=f,t.block._i+=T,t.block._e=j,t.stack.pushAt(o,k.clone(),"$id",O)),t.token={name:O,value:e.cur(),token:[A+q+T+j,q+T]},u}return!1}}),on=Ct(tn,{constructor:function(e,t,n,r,o,s){var l=this;l.type=e?e:K,l.name=t||null,l.token=null,l.status=0,l.msg=r||null,l.min=o||0,l.max=s||w,l.found=0,l.$msg=null,l.$clone=["min","max","found"],n&&l.set(n)},min:0,max:1,found:0,set:function(e){return e&&(this.token=Rt(e)),this},get:function(e,t){var n,r,o,s,l,u,i,c,a,p,f,h,m,g,k=this,d=k.type,y=k.token,O=y.length;if(k.$msg=k.msg||null,k.status&=E,f=e.pos,s=t.stack,U===d){for(a=0,p=0,k.status|=b,l=[],n=0;O>n;n++){if(r=y[n].clone().req(1),o=r.get(e,t),r.status&b&&(a++,l.push(r.err())),!1!==o)return o;r.status&v&&(p++,e.bck(f))}return a>0?k.status|=b:k.status&=_,O===p&&a>0?k.status|=v:k.status&=E,k.status&&!k.$msg&&l.length&&(k.$msg=l.join(" | ")),!1}if(W&d){if(g=d&G?1:0,g?k.status|=b:k.status&=_,h=s.pos(),r=y[0].clone().req(g),o=r.get(e,t),m=k.name+"_"+Kt(),!1!==o){if(!0!==o)for(n=O-1;n>0;n--)s.pushAt(h+O-n-1,y[n].clone().req(1),"$id",m);return o}return r.status&v?(g?k.status|=v:k.status&=E,e.bck(f)):g&&r.status&b&&(k.status|=v),k.status&&!k.$msg&&(k.$msg=r.err()),!1}for(a=0,u=k.found,i=k.min,c=k.max,k.status&=_,h=s.pos(),m=k.name+"_"+Kt(),l=[],n=0;O>n;n++){if(r=y[n].clone().req(1),o=r.get(e,t),!1!==o){if(++u,c>=u)return k.found=u,s.pushAt(h,k.clone(),"$id",m),k.found=0,o;break}r.status&b&&(a++,l.push(r.err())),r.status&v&&e.bck(f)}return i>u?k.status|=b:k.status&=_,u>c||i>u&&a>0?k.status|=v:k.status&=E,k.status&&!k.$msg&&l.length&&(k.$msg=l.join(" | ")),!1}}),g="",k="";{var un=Ct({constructor:function(e,t){var n=this;n.DEF=t.DEFAULT,n.ERR=t.ERROR,n.Tokens=e.Parser||[],n.cTokens=e.cTokens.length?e.cTokens:null,n.Style=e.Style},ERR:null,DEF:null,cTokens:null,Tokens:null,Style:null,dispose:function(){var e=this;return e.ERR=null,e.DEF=null,e.cTokens=null,e.Tokens=null,e.Style=null,e},parse:function(e,t){e=e||"";var n,r,o,s,l,u=this,i=e.split(Ft),c=i.length,a=null;if(t=t||d,o=!!(t&y),s=!!(t&d),r={state:new ln(0,0,o),tokens:null},s)for(a=[],n=0;c>n;n++)r.state.line=n,r=u.getLineTokens(i[n],r.state,n),a=a.concat(r.tokens),c>n+1&&a.push("\n");else for(n=0;c>n;n++)r.state.line=n,r=u.getLineTokens(i[n],r.state,n);return l=s&&o?{tokens:a,errors:r.state.err}:s?a:r.state.err,r.state.dispose(),l},getLineTokens:function(e,t){var n,r,o,s,l,u,i,c,a,p,f,h,m,g,k,d,y,b=this,_=b.cTokens,E=b.Tokens,w=E.length,$=b.Style,S=b.DEF,x=b.ERR;for(c=[],d=new Jt(e),y=t.stack,a={id:null,type:null,content:""},p=null,f=null,i=null,d.sol()&&!y.isEmpty()&&L===y.peek().type&&y.pop(),m=t.line,h=d.pos,k=!1;!d.eol();){if(r=0,S===f||x===f){if(i&&k){for(g="";c.length&&i===c[c.length-1].id;)g=c.pop().content+g;i===a.id?g+=a.content:a.type&&c.push(a),g+=d.cur(1),c.push(g)}else a.type&&c.push(a),g=d.cur(1),c.push(g);a={id:null,type:null,content:""}}else f&&f!==a.type?(g=d.cur(1),a.type&&c.push(a),a={id:i,type:f,content:g}):a.type&&(g=d.cur(1),a.content+=g);if(f=!1,i=null,k=!1,!y.isEmpty()&&N===y.peek().type||!d.spc()){for(;!y.isEmpty()&&!d.eol();){if(_){for(s=0,o=0;s<_.length;)if(l=_[s++],p=l.get(d,t),!1!==p){f=$[p]||S,i=l.name,o=1;break}if(o){r=1;break}}if(h=d.pos,l=y.pop(),p=l.get(d,t),!1!==p){if(!0!==p){for(f=$[p]||S,i=l.name;!y.isEmpty()&&X===y.peek().type;)if(u=y.pop(),u.get(d,t),u.status&v){p=x,f=x,k=!0;break}r=1;break}}else{if(l.status&O){y.empty("$id",l.$id),d.nxt(),p=x,f=x,l.err(t,m,h,m,d.pos),r=1;break}f=!1}}if(!r){if(d.eol())break;for(n=0;w>n;n++)if(h=d.pos,l=E[n],p=l.get(d,t),!1!==p){if(!0!==p){for(f=$[p]||S,i=l.name;!y.isEmpty()&&X===y.peek().type;)if(u=y.pop(),u.get(d,t),u.status&v){p=x,f=x,k=!0;break}r=1;break}}else{if(l.status&O){y.empty("$id",l.$id),d.nxt(),p=x,f=x,l.err(t,m,h,m,d.pos),r=1;break}f=!1}if(!r){if(d.eol())break;d.nxt(),p=S,f=S}}}else p=S,f=S}if(S===f||x===f)if(i&&k){for(g="";c.length&&i===c[c.length-1].id;)g=c.pop().content+g;i===a.id?g+=a.content:a.type&&c.push(a),g+=d.cur(1),c.push(g)}else a.type&&c.push(a),g=d.cur(1),c.push(g);else f&&f!==a.type?(g=d.cur(1),a.type&&c.push(a),c.push({id:i,type:f,content:g})):a.type&&(g=d.cur(1),a.content+=g,c.push(a));return a=null,{state:t,tokens:c}}});e.PrismGrammar={VERSION:"2.0.0",clone:qt,extend:jt,parse:h,getMode:m}}return e.PrismGrammar});