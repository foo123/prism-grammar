/**
*
*   PrismGrammar
*   @version: 1.0.2
*
*   Transform a grammar specification in JSON format, into a syntax-highlighter for Prism
*   https://github.com/foo123/prism-grammar
*
**/!function(t,e,n){"use strict";var r,l="object"==typeof module&&module.exports,o="function"==typeof define&&define.amd;l?module.exports=(module.$deps=module.$deps||{})[e]=module.$deps[e]||n.call(t,{NODE:module})||1:o&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(e)?define(e,["require","exports","module"],function(e,r,l){return n.call(t,{AMD:l})}):e in t||(t[e]=r=n.call(t,{})||1)&&o&&define(e,[],function(){return r})}(this,"PrismGrammar",function(t){"use strict";function e(t,e){var n,r=this;return(n=t.chr(r.tp,e))?[r.tk,n]:!1}function n(t,e){var n,r=this;return(n=t.chl(r.tp,e))?[r.tk,n]:!1}function r(t,e){var n,r=this;return(n=t.str(r.tp,r.p,e))?[r.tk,n]:!1}function l(t,e){var n,r=this;return(n=t.rex(r.tp,r.p,r.np,r.tg,e))?[r.tk,n]:!1}function o(t,e){var n=this;return!1!==e&&t.end(),[n.tk,""]}function s(t,e,n,r){var l=he(e);if(Y===l)return e;if(r[t])return r[t];n=n||0;var o,s=0;return e&&e.isCharList&&(s=1,delete e.isCharList),o=ue&l?new qe(ue,t,e,n):ee===l?new qe(ee,t,e,n):te&l?s?new qe(ne,t,e,n):new qe(te,t,e,n):re&l?new qe(se,t,e,n):e,r[t]=o}function i(t,e,n,r,l,o){if(o[t])return o[t];var u,c,a,p,f,h,g,k=0,d=0,E=1;if(u=Ee(e),a=u.length,1===a)g=s(t,De(u[0],n,l),0,o);else if(a>1){for(p=(a>>1)+1,c=0;p>=c;c++)f=he(u[c]),h=he(u[a-1-c]),(ee!==f||ee!==h)&&(E=0),re&f||re&h?k=1:(xe(u[c],n)||xe(u[a-1-c],n))&&(d=1);if(!E||r&&te&he(r))if(!r||k||d){for(c=0;a>c;c++)u[c]=re&he(u[c])?i(t+"_"+c,u[c],n,r,l,o):s(t+"_"+c,De(u[c],n,l),c,o);g=a>1?new Fe(t,u):u[0]}else g=s(t,je(u,r),0,o);else u=u.slice().join(""),u.isCharList=1,g=s(t,u,0,o)}return o[t]=g}function u(t,e,n,r,l){if(l[t])return l[t];var o,i,u,c,a,p,f;for(c=[],a=[],o=me(e),i=0,u=o.length;u>i;i++)p=s(t+"_0_"+i,De(o[i][0],n,r),i,l),f=o[i].length>1?se!==p.tt||te!==he(o[i][1])||xe(o[i][1],n)?s(t+"_1_"+i,De(o[i][1],n,r),i,l):o[i][1]:p,c.push(p),a.push(f);return l[t]=new ze(t,c,a)}function c(t,e,n){var r,l,o,s,i,u,c,a,p,f,h,g;if(u=new String(Oe(t)),u.pos=0,1===u.length)f=""+t,e[f]||(e[f]={type:"simple",tokens:t}),t=f;else{for(r=[],l=[],o="",h=[];u.pos<u.length;)if(a=u.charAt(u.pos++),Me.test(a))if(o.length&&(e[o]||n[o]||(e[o]={type:"simple",tokens:o}),l.push(o),o=""),'"'===a||"'"===a){for(c=a,s="";u.pos<u.length&&c!==(a=u.charAt(u.pos++));)s+=a;s.length?(f=""+s,e[f]||(e[f]={type:"simple",tokens:s}),l.push(f)):l.push(0)}else if("*"===a||"+"===a||"?"===a)p=l.pop(),f=""+p+a,n[f]||(n[f]={type:"group",match:"*"===a?"zeroOrMore":"+"===a?"oneOrMore":"zeroOrOne",tokens:[p]}),l.push(f);else if("{"===a){for(i="";u.pos<u.length&&"}"!==(a=u.charAt(u.pos++));)i+=a;i=i.split(",").map(Oe),i[0]=i[0].length?parseInt(i[0],10)||0:0,0>i[0]&&(i[0]=0),2>i.length?i.push(i[0]):i[1]=i[1].length?parseInt(i[1],10)||R:R,0>i[1]&&(i[1]=0),p=l.pop(),f=""+p+["{",i[0]||"",",",isFinite(i[1])?i[1]||"":"","}"].join(""),n[f]||(n[f]={type:"group",match:[i[0],i[1]],tokens:[p]}),l.push(f)}else{if("}"===a)continue;"|"===a?(l.length>1?(f=""+l.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:l}),r.push(f)):l.length&&r.push(l[0]),l=[]):"("===a?(h.push([l,r,o]),l=[],r=[],o=""):")"===a&&(l.length>1?(f=""+l.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:l}),r.push(f)):l.length&&r.push(l[0]),l=[],r.length>1?(f=""+r.join(" | "),n[f]||(n[f]={type:"group",match:"either",tokens:r})):r.length&&(f=r[0]),r=[],g=h.pop(),l=g[0],r=g[1],o=g[2],p=f,f="("+p+")",n[f]||(n[f]=Re(e[p]||n[p])),l.push(f))}else o+=a;o.length&&(e[o]||n[o]||(e[o]={type:"simple",tokens:o}),l.push(o)),o="",l.length>1?(f=""+l.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:l}),r.push(f)):l.length&&r.push(l[0]),l=[],r.length>1?(f=""+r.join(" | "),n[f]||(n[f]={type:"group",match:"either",tokens:r}),t=f):r.length&&(t=r[0]),r=[]}return t}function a(t,e,n,r,l,o,s,h,g,k,d){var v,y,_,w,x,L,Q,q,V,$,U,Z,H,Y,J,W,X=null;if(null===t)return new Ve(S,"EOL",t);if(""===t)return new Ve(C,"NONSPACE",t);if(!1===t||0===t)return new Ve(O,"EMPTY",t);if(re&he(t)&&(W=t,t="NGRAM_"+W.join("_"),r[t]||(r[t]={type:"ngram",tokens:W})),t=""+t,h[t])return h[t];for(n[t]?(v=n[t],pe&he(v)&&(v=n[t]={type:"simple",tokens:v})):v=r[t]?r[t]:t,te&he(v)&&(v=c(v,n,r),v=n[v]||r[v]);v.extend;)Y=v.extend,J=n[Y]||r[Y],delete v.extend,J&&(pe&he(J)&&(J={type:"simple",tokens:J}),v=ve(J,v));if("undefined"==typeof v.type&&(v.all||v.sequence?(v.type="group",v.match="sequence",v.tokens=v.all||v.sequence,v.all?delete v.all:delete v.sequence):v.either?(v.type="group",v.match="either",v.tokens=v.either,delete v.either):v.zeroOrMore?(v.type="group",v.match="zeroOrMore",v.tokens=v.zeroOrMore,delete v.zeroOrMore):v.oneOrMore?(v.type="group",v.match="oneOrMore",v.tokens=v.oneOrMore,delete v.oneOrMore):v.zeroOrOne?(v.type="group",v.match="zeroOrOne",v.tokens=v.zeroOrOne,delete v.zeroOrOne):v.comment?(v.type="comment",v.tokens=v.comment,delete v.comment):v.block?(v.type="block",v.tokens=v.block,delete v.block):v["escaped-block"]?(v.type="escaped-block",v.tokens=v["escaped-block"],delete v["escaped-block"]):v.simple?(v.type="simple",v.tokens=v.simple,delete v.simple):v.type="simple"),y=v.type?F[v.type.toUpperCase().replace(Te,"")]:b,b&y){if(""===v.tokens)return X=new Ve(C,t,t),h[t]=X,X;if(null===v.tokens)return X=new Ve(S,t,t),h[t]=X,X;if(!1===v.tokens||0===v.tokens)return X=new Ve(O,t,t),h[t]=X,X}if(v.tokens=Ee(v.tokens),b&y)v.autocomplete&&f(v,t,d),v.push?(v.action||(v.action=["push",v.push]),delete v.push):v[K]("pop")&&(v.action||(v.action=["pop",v.pop]),delete v.pop),w=null,v.action&&v.action[0]&&("push"===v.action[0]?w=[E,v.action[1]]:"pop"===v.action[0]&&(w=[m,v.action[1]])),_="undefined"==typeof v.combine?"\\b":v.combine,X=new Ve(b,t,i(t,v.tokens.slice(),e,_,o,s)),X.ta=w,h[t]=X;else if(A&y)T&y&&p(v,k),X=new $e(y,t,u(t,v.tokens.slice(),e,o,s),v.multiline,v.escape,l[t+".inside"]?1:0),h[t]=X,v.interleave&&g.push(X.clone());else if(P&y){for(L=v.tokens.slice(),re&he(v.match)?X=new Ke(j,t,null,v.match[0],v.match[1]):(x=z[v.match.toUpperCase()],X=G===x?new Ke(G,t,null,0,1):I===x?new Ke(I,t,null,0,R):N===x?new Ke(N,t,null,1,R):M&x?new Ke(M,t,null):new Ke(D,t,null)),h[t]=X,Q=[],$=0,U=L.length;U>$;$++)Q=Q.concat(a(L[$],e,n,r,l,o,s,h,g,k,d));X.set(Q)}else if(B&y){for(X=me(v.tokens.slice()).slice(),q=[],$=0,U=X.length;U>$;$++)q[$]=X[$].slice(),X[$]=new Ke(B,t+"_NGRAM_"+$,null);for(h[t]=X,$=0,U=X.length;U>$;$++){for(V=q[$],Q=[],Z=0,H=V.length;H>Z;Z++)Q=Q.concat(a(V[Z],e,n,r,l,o,s,h,g,k,d));X[$].set(Q)}}return h[t]}function p(t,e){var n,r,l,o,s,i=me(t.tokens.slice());for(o=0,s=i.length;s>o;o++)n=i[o][0],r=i[o].length>1?i[o][1]:i[o][0],l=i[o].length>2?i[o][2]:"",null===r?(e.line=e.line||[],e.line.push(n)):(e.block=e.block||[],e.block.push([n,r,l]))}function f(t,e,n){var r=[].concat(Ee(t.tokens)).map(function(t){return{word:t,meta:e}});n.autocomplete=(n.autocomplete||[]).concat(r)}function h(t){var e,n,r,l,o,s,i,u,c,p,f,h,g,k,d,E;if(t.__parsed)return t;for(f={},h={},g={},d={},E={},k=[],t=Re(t),e=t.RegExpID||null,t.RegExpID=null,delete t.RegExpID,s=t.Lex||{},t.Lex=null,delete t.Lex,i=t.Syntax||{},t.Syntax=null,delete t.Syntax,o=t.Style||{},l=t.Parser||[],r=l.length,n=[],u=0;r>u;u++)c=l[u],p=a(c,e,s,i,o,f,h,g,k,d,E)||null,p&&(re&he(p)?n=n.concat(p):n.push(p));return t.Parser=n,t.cTokens=k,t.Style=o,t.Comments=d,t.Keywords=E,t.Extra=t.Extra||{},t.__parsed=1,t}function g(t){var e,n=new He(h(t),{DEFAULT:k,ERROR:d}),r=0,l=null,o={"before-highlight":function(t){l===t.language&&(t._code=t.code,t.code="")},"before-insert":function(t){l===t.language&&(t.code=t._code,t._code="",t.highlightedCode=e.Token.stringify(n.parse(t.code),t.language))}};return{hook:function(t,n){if(!r){e=t,l=n;for(var s in o)o[K](s)&&e.hooks.add(s,o[s]);r=1}},unhook:function(){if(r){var t,n,l=e.hooks.all;for(t in o)l[K](t)&&o[K](t)&&(n=l[t].indexOf(o[t]),n>-1&&l[t].splice(n,1));r=0}}}}var k,d,E=1,m=2,R=1/0,v=2,y=4,_=8,b=16,S=17,C=18,O=20,A=32,w=33,T=34,M=64,x=128,D=x,j=256,G=257,I=258,N=259,P=512,B=1024,L=D|B,Q=2048,q=4096,z={EITHER:M,ALL:x,SEQUENCE:D,ZEROORONE:G,ZEROORMORE:I,ONEORMORE:N,REPEATED:j},F={INDENT:Q,DEDENT:q,BLOCK:A,COMMENT:T,ESCAPEDBLOCK:w,SIMPLE:b,GROUP:P,NGRAM:B},V=void 0,$="prototype",K="hasOwnProperty",U="propertyIsEnumerable",Z=(Object.keys,Array[$],Object[$]),H=(Function[$],Z.toString),Y=4,J=5,W=6,X=8,te=16,ee=17,ne=18,re=32,le=64,oe=128,se=256,ie=512,ue=1024,ce=2048,ae=4096,pe=te|re,fe={"[object Number]":Y,"[object String]":te,"[object Array]":re,"[object RegExp]":se,"[object Date]":ie,"[object Function]":oe,"[object Object]":le},he=function(t){if(null===t)return ue;if(!0===t||!1===t||t instanceof Boolean)return X;if(V===t)return ce;var e=fe[H.call(t)]||ae;return Y===e||t instanceof Number?isNaN(t)?W:isFinite(t)?Y:J:te===e||t instanceof String?1===t.length?ee:te:re===e||t instanceof Array?re:se===e||t instanceof RegExp?se:ie===e||t instanceof Date?ie:oe===e||t instanceof Function?oe:le===e?le:ae},ge=function(){var t,e,n,r,l,o,s=arguments,i=s.length;for(t=s[0]||{},l=1;i>l;l++)if(e=s[l],le===he(e))for(r in e)e[K](r)&&e[U](r)&&(n=e[r],o=he(n),t[r]=Y&o?0+n:pe&o?n.slice():n);return t},ke=Object.create,de=function(t,e){var n,r=arguments.length,l="constructor";return 0===r?(t=Object,e={}):1===r?(e=t||{},t=Object):(t=t||Object,e=e||{}),e[K](l)||(e[l]=function(){}),n=e[l],delete e[l],n[$]=ge(ke(t[$]),e),n[$][l]=n,n},Ee=function(t,e){return e||re!==he(t)?[t]:t},me=function(t,e){return t=Ee(t),(e||re!==he(t[0]))&&(t=[t]),t},Re=function(t,e){var n,r,l,o,s=he(t);if(e=!1!==e,le===s){r={};for(l in t)t[K](l)&&t[U](l)&&(n=he(t[l]),r[l]=le===n?e?Re(t[l],e):t[l]:re===n?e?Re(t[l],e):t[l].slice():te&n?t[l].slice():Y&n?0+t[l]:t[l])}else if(re===s)for(o=t.length,r=new Array(o),l=0;o>l;l++)n=he(t[l]),r[l]=le===n?e?Re(t[l],e):t[l]:re===n?e?Re(t[l],e):t[l].slice():te&n?t[l].slice():Y&n?0+t[l]:t[l];else r=te&s?t.slice():Y&s?0+t:t;return r},ve=function(){var t,e,n,r,l,o,s,i,u,c,a=arguments,p=a.length;if(1>p)return null;for(e=Re(a[0]),n=1;p>n;n++)if(t=a[n])for(r in t)if(t[K](r)&&t[U](r))if(e[K](r)&&e[U](r)){if(u=he(e[r]),c=he(t[r]),le===u&&le===c)e[r]=ve(e[r],t[r]);else if(re===u&&re===c){if(s=e[r],i=t[r],o=i.length,!o)continue;if(s.length)for(l=0;o>l;l++)0>s.indexOf(i[l])&&s.push(i[l]);else e[r]=i.slice()}}else e[r]=Re(t[r]);return e},ye=/([.*+?^${}()|[\]\/\\\-])/g,_e=function(t){return t.replace(ye,"\\$1")},be=/\$(\d{1,2})/g,Se=function(t,e){var n,r,l,o;for(o=function(t,n){return e[1+parseInt(n,10)]},n=t.split("$$"),l=n.length,r=0;l>r;r++)n[r]=n[r].replace(be,o);return n.join("$")},Ce=/^\s+|\s+$/g,Oe=String[$].trim?function(t){return t.trim()}:function(t){return t.replace(Ce,"")},Ae=function(t,e){return e.length-t.length},we=/\r\n|\r|\n/g,Te=/[\-_]/g,Me=/^([{}()*+?|'"]|\s)/,xe=function(t,e){return te&he(e)&&te&he(t)&&e.length&&e.length<=t.length&&e==t.substr(0,e.length)},De=function(t,e,n){if(!t||Y===he(t))return t;var r,l=e?e.length||0:0;if(l&&e==t.substr(0,l)){var o,s,i,u,r,c,a=t.substr(l),p=a[0],f="";for(r=a.length;r--&&(c=a[r],p!=c);)"i"==c.toLowerCase()&&(f="i");return o=a.substring(1,r),s="^("+o+")",n[s]||(i=new RegExp(s,f),u={peek:null,negativepeek:null},n[s]=[i,u]),n[s]}return t},je=function(t,e){var n={},r="",l=he(e);(te===l||ee===l)&&(r=e);var o=t.sort(Ae).map(function(t){return n[t.charAt(0)]=1,_e(t)}).join("|");return[new RegExp("^("+o+")"+r),{peek:n,negativepeek:null},1]},Ge=0,Ie=function(){return++Ge},Ne=function(t){return[t||"uuid",++Ge,(new Date).getTime()].join("_")},Pe=Math.max,Be=/^[\s\u00a0]+/,Le=/[^\s\u00a0]/,Qe=de({constructor:function(t){var e=this;e._=null,e.s=t?""+t:"",e.start=e.pos=0,e.lCP=e.lCV=0,e.lS=0},_:null,s:"",start:0,pos:0,lCP:0,lCV:0,lS:0,dispose:function(){var t=this;return t._=null,t.s=null,t.start=null,t.pos=null,t.lCP=null,t.lCV=null,t.lS=null,t},toString:function(){return this.s},sol:function(){return 0===this.pos},eol:function(){return this.pos>=this.s.length},chr:function(t,e){var n=this,r=n.s.charAt(n.pos)||null;return r&&t===r?(!1!==e&&(n.pos+=1,n._&&(n._.pos=n.pos)),r):!1},chl:function(t,e){var n=this,r=n.s.charAt(n.pos)||null;return r&&-1<t.indexOf(r)?(!1!==e&&(n.pos+=1,n._&&(n._.pos=n.pos)),r):!1},str:function(t,e,n){var r,l=this,o=l.pos,s=l.s,i=s.charAt(o)||null;return i&&e[i]&&(r=t.length,t===s.substr(o,r))?(!1!==n&&(l.pos+=r,l._&&(l._.pos=l.pos)),t):!1},rex:function(t,e,n,r,l){{var o,s=this,i=s.pos,u=s.s;u.charAt(i)||null}return o=u.slice(i).match(t),!o||o.index>0?!1:(!1!==l&&(s.pos+=o[r||0].length,s._&&(s._.pos=s.pos)),o)},spc:function(t){var e,n=this,r=n.pos,l=n.s.slice(r);return(e=l.match(Be))?(!1!==t&&(n.pos+=e[0].length,n._&&(n._.pos=n.pos)),1):0},end:function(){var t=this;return t.pos=t.s.length,t._&&(t._.pos=t.pos),t},nxt:function(){var t,e=this,n=e.s;return e.pos<n.length?(t=n.charAt(e.pos++)||null,e._&&(e._.pos=e.pos),t):void 0},bck:function(t){var e=this;return e.pos=Pe(0,e.pos-t),e._&&(e._.pos=e.pos),e},bck2:function(t){var e=this;return e.pos=Pe(0,t),e._&&(e._.pos=e.pos),e},col:function(t){var e=this;return t=t||1,e.lCP<e.start&&(e.lCV=Qe.col(e.s,e.start,t,e.lCP,e.lCV),e.lCP=e.start,e._&&(e._.start=e.start,e._.lastColumnPos=e.lCP,e._.lastColumnValue=e.lCV,e._.lineStart=e.lS)),e.lCV-(e.lS?Qe.col(e.s,e.lS,t):0)},ind:function(t){var e=this;return t=t||1,Qe.col(e.s,null,t)-(e.lS?Qe.col(e.s,e.lS,t):0)},cur:function(t){var e=this,n=e.s.slice(e.start,e.pos);return t&&(e.start=e.pos),n},sft:function(){return this.start=this.pos,this}});Qe.col=function(t,e,n,r,l){var o,s;for(null===e&&(e=t.search(Le),-1==e&&(e=t.length)),o=r||0,s=l||0;e>o;++o)s+="	"==t.charAt(o)?n-s%n:1;return s},Qe._=function(t){var e=new Qe;return e._=t,e.s=""+t.string,e.start=t.start,e.pos=t.pos,e.lCP=t.lastColumnPos,e.lCV=t.lastColumnValue,e.lS=t.lineStart,e};var qe,ze,Fe,Ve,$e,Ke,Ue=de({constructor:function(t){this._=t||[]},_:null,dispose:function(){var t=this;return t._=null,t},toString:function(){return this._.slice().reverse().join("\n")},clone:function(){return new Ue(this._.slice())},isEmpty:function(){return 0>=this._.length},pos:function(){return this._.length},peek:function(t){var e=this,n=e._;if(t=arguments.length?t:-1,n.length){if(0>t&&0<=n.length+t)return n[n.length+t];if(t>=0&&t<n.length)return n[t]}return null},pop:function(){return this._.pop()},shift:function(){return this._.shift()},push:function(t){var e=this;return e._.push(t),e},unshift:function(t){var e=this;return e._.unshift(t),e},pushAt:function(t,e,n,r){var l=this,o=l._;return n&&r&&(e[n]=r),t<o.length?o.splice(t,0,e):o.push(e),l},empty:function(t,e){{var n=this,r=n._;r.length}if(t&&e)for(;r.length&&r[r.length-1]&&r[r.length-1][t]===e;)r.pop();else r.length=0;return n}}),Ze=de({constructor:function(t,e){var n=this;n.id=e?Ne("state"):"state",n.l=t||0,n.stack=new Ue,n.data=new Ue,n.col=0,n.indent=0,n.t=null,n.inBlock=null,n.endBlock=null},id:null,l:0,col:0,indent:0,stack:null,data:null,t:null,inBlock:null,endBlock:null,dispose:function(){var t=this;return t.stack&&t.stack.dispose(),t.data&&t.data.dispose(),t.stack=null,t.data=null,t.id=null,t.t=null,t.l=null,t.col=null,t.indent=null,t.inBlock=null,t.endBlock=null,t},clone:function(t){var e=this,n=new Ze(e.l,t);return n.t=e.t,n.col=e.col,n.indent=e.indent,n.stack=e.stack.clone(),n.data=e.data.clone(),n.inBlock=e.inBlock,n.endBlock=e.endBlock,n},toString:function(){var t=this;return["",t.id,t.l,t.t,t.inBlock||"0"].join("_")}});qe=de({constructor:function(t,s,i,u){var c=this;switch(c.mt=v,c.tt=t||ee,c.tn=s,c.tk=u||0,c.tg=0,c.tp=null,c.p=null,c.np=null,c.tt){case ee:case ne:c.tp=i,c.get=ne===c.tt?n:e;break;case te:c.tp=i,c.p={},c.p[""+i.charAt(0)]=1,c.get=r;break;case se:c.tp=i[0],c.p=i[1].peek||null,c.np=i[1].negativepeek||null,c.tg=i[2]||0,c.get=l;break;case ue:c.tp=null,c.get=o}},mt:null,tt:null,tn:null,tp:null,tg:0,tk:0,p:null,np:null,get:function(){return!1},toString:function(){var t=this;return["[","Matcher: ",t.tn,", Pattern: ",t.tp?t.tp.toString():null,"]"].join("")}}),Fe=de(qe,{constructor:function(t,e,n){var r=this;r.mt=y,r.tn=t,r.ms=e,r.ownKey=!1!==n},ms:null,ownKey:!0,get:function(t,e){var n,r,l=this,o=l.ms,s=o.length,i=l.ownKey;for(n=0;s>n;n++)if(r=o[n].get(t,e))return i?[n,r[1]]:r;return!1}}),ze=de(qe,{constructor:function(t,e,n){var r=this;r.mt=_,r.tn=t,r.s=new Fe(r.tn+"_Start",e,!1),r.e=n},s:null,e:null,get:function(t,e){var n,r=this,l=r.s,o=r.e;if(n=l.get(t,e)){var s,i=o[n[0]],u=he(i),c=l.ms[n[0]].tt;return se===c&&(Y===u?(s=n[1][i+1],i=new qe(s.length>1?te:ee,r.tn+"_End",s)):te===u&&(s=Se(i,n[1]),i=new qe(s.length>1?te:ee,r.tn+"_End",s))),i}return!1}}),Ve=de({constructor:function(t,e,n){var r=this;r.tt=t||b,r.id=e,r.tk=n,r.REQ=0,r.ERR=0,r.ACTER=0,r.MSG=null,r.CLONE=["tk"]},sID:null,id:null,tt:null,tk:null,ta:null,REQ:0,ERR:0,ACTER:0,MSG:null,CLONE:null,act:function(t,e){var n,r,l=this,o=l.ta||null,s=e.data;if(o)if(n=o[0],r=o[1],m===n)if(r){if(t&&(r=Y===he(r)?t[1][r]:Se(r,t[1])),s.isEmpty()||r!==s.peek())return l.MSG='Token "'+r+'" No Match',s.pop(),1;s.pop()}else s.pop();else E===n&&r&&(t&&(r=Y===he(r)?t[1][r]:Se(r,t[1])),s.push(r));return 0},get:function(t,e){var n=this,r=n.ta,l=n.tk,o=n.tt,s=n.id,i=null;if(n.MSG=null,n.ACTER=0,O===o)return n.ERR=0,n.REQ=0,!0;if(S===o){if(t.spc(),t.eol())return s}else if(C===o)n.ERR=n.REQ&&t.spc()&&!t.eol()?1:0,n.REQ=0;else if(i=l.get(t))return r&&(n.ACTER=n.act(i,e)),s;return!1},req:function(t){return this.REQ=!!t,this},err:function(){var t=this;return t.MSG?t.MSG:t.REQ?'Token "'+t.id+'" Expected':'Syntax Error: "'+t.id+'"'},clone:function(){var t,e,n,r=this,l=r.CLONE;if(t=new r.constructor,t.tt=r.tt,t.id=r.id,t.ta=r.ta?r.ta.slice():r.ta,l&&l.length)for(e=0,n=l.length;n>e;e++)t[l[e]]=r[l[e]];return t},toString:function(){var t=this;return["[","Tokenizer: ",t.id,", Matcher: ",t.tk?t.tk.toString():null,"]"].join("")}}),$e=de(Ve,{constructor:function(t,e,n,r,l,o){var s=this;s.tt=t,s.id=e,s.tk=n,s.REQ=0,s.ERR=0,s.ACTER=0,s.MSG=null,s.mline="undefined"==typeof r?1:r,s.esc=l||"\\",s.inter=o,s.CLONE=["tk","mline","esc","inter"]},inter:0,mline:0,esc:null,get:function(t,e){var n,r,l,o,s,i,u,c,a,p=this,f=0,h=0,g="",k=p.mline,d=p.tk,E=p.id,m=p.tt,R=p.inter,v=R?E+".inside":E,y=0,_=w===m,b=p.esc;if(p.MSG=null,p.ACTER=0,T===m&&(p.REQ=0),s=0,e.inBlock===E?(h=1,n=e.endBlock,s=1,i=v):!e.inBlock&&(n=d.get(t))&&(h=1,e.inBlock=E,e.endBlock=n,i=E),h){if(l=e.stack.pos(),o=ue===n.tt,R){if(s&&o&&t.sol())return p.REQ=0,e.inBlock=null,e.endBlock=null,!1;if(!s)return e.stack.pushAt(l,p.clone(),"sID",E),i}if(f=n.get(t),r=k,a=0,f)i=o?v:E;else for(c=t.pos;!t.eol();){if(u=t.pos,!(_&&y||!n.get(t))){R&&t.pos>u&&u>c?(i=v,t.bck2(u),a=1):(i=E,f=1);break}g=t.nxt(),y=!y&&g==b}return r=k||_&&y,f||!r&&!a?(e.inBlock=null,e.endBlock=null):e.stack.pushAt(l,p.clone(),"sID",E),i}return!1}}),Ke=de(Ve,{constructor:function(t,e,n,r,l){var o=this;o.tt=t?t:j,o.id=e||null,o.tk=null,o.ts=null,o.REQ=0,o.ERR=0,o.ACTER=0,o.MSG=null,o.min=r||0,o.max=l||R,o.found=0,o.CLONE=["ts","min","max","found"],n&&o.set(n)},ts:null,min:0,max:1,found:0,set:function(t){return t&&(this.ts=Ee(t)),this},get:function(t,e){var n,r,l,o,s,i,u,c,a,p,f,h,g=this,k=g.tt,d=g.ts,E=d.length;if(M===k){for(u=0,c=0,g.REQ=1,g.ERR=0,g.ACTER=0,g.MSG=null,a=t.pos,n=0;E>n;n++){if(r=d[n].clone().req(1),l=r.get(t,e),u+=r.REQ?1:0,!1!==l)return g.ACTER=r.ACTER,g.MSG=r.MSG,l;r.ERR&&(c++,t.bck2(a))}return g.REQ=u>0,g.ERR=E==c&&u>0,!1}if(L&k){if(h=k&D?1:0,g.REQ=h,g.ERR=0,g.ACTER=0,g.MSG=null,a=t.pos,p=e.stack.pos(),r=d[0].clone().req(h),l=r.get(t,e),f=g.id+"_"+Ie(),!1!==l){if(!0!==l)for(var n=E-1;n>0;n--)e.stack.pushAt(p+E-n-1,d[n].clone().req(1),"sID",f);return g.ACTER=r.ACTER,g.MSG=r.MSG,l}return r.ERR?(g.ERR=h,t.bck2(a)):h&&r.REQ&&(g.ERR=1),!1}for(u=0,o=g.found,s=g.min,i=g.max,g.ERR=0,g.REQ=0,g.ACTER=0,g.MSG=null,a=t.pos,p=e.stack.pos(),f=g.id+"_"+Ie(),n=0;E>n;n++){if(r=d[n].clone().req(1),l=r.get(t,e),!1!==l){if(++o,i>=o)return g.found=o,e.stack.pushAt(p,g.clone(),"sID",f),g.found=0,g.ACTER=r.ACTER,g.MSG=r.MSG,l;break}r.REQ&&u++,r.ERR&&t.bck2(a)}return g.REQ=s>o,g.ERR=o>i||s>o&&u>0,!1}}),k="",d="";{var He=de({constructor:function(t,e){var n=this;n.DEF=e.DEFAULT,n.ERR=e.ERROR,n.Tokens=t.Parser||[],n.cTokens=t.cTokens.length?t.cTokens:null,n.Style=t.Style},ERR:null,DEF:null,cTokens:null,Tokens:null,Style:null,dispose:function(){var t=this;return t.ERR=null,t.DEF=null,t.cTokens=null,t.Tokens=null,t.Style=null,t},parse:function(t){t=t||"";var e,n,r=this,l=t.split(we),o=l.length,s=[];for(n={state:new Ze,tokens:null},e=0;o>e;e++)n=r.getLineTokens(l[e],n.state,e),s=s.concat(n.tokens),o>e+1&&s.push("\n");return s},getLineTokens:function(t,e){var n,r,l,o,s,i,u,c,a,p,f,h=this,g=h.cTokens,k=h.Tokens,d=k.length,E=null,m=h.Style,R=h.DEF,v=h.ERR;for(i=[],p=new Qe(t),f=e.stack,u={type:null,content:""},c=null,a=null,p.sol()&&!f.isEmpty()&&S===f.peek().tt&&f.pop();!p.eol();)if(r=0,R===a||v===a?(u.type&&i.push(u),i.push(p.cur(1)),u={type:null,content:""}):a&&a!==u.type?(u.type&&i.push(u),u={type:a,content:p.cur(1)}):u.type&&(u.content+=p.cur(1)),a=!1,!f.isEmpty()&&C===f.peek().tt||!p.spc()){for(;!f.isEmpty()&&!p.eol();){if(g){for(o=0,l=0;o<g.length;)if(s=g[o++],e.t=c=s.get(p,e),!1!==c){a=m[c]||R,l=1;break}if(l){r=1;break}}if(s=f.pop(),e.t=c=s.get(p,e),!1!==c){if(!0!==c){a=m[c]||R,s.ACTER&&(f.empty("sID",s.sID),e.t=c=v,a=v,E=s.err()),r=1;break}}else{if(s.ERR||s.REQ){f.empty("sID",s.sID),p.nxt(),e.t=c=v,a=v,E=s.err(),r=1;break}a=!1}}if(!r){if(p.eol())break;for(n=0;d>n;n++)if(s=k[n],e.t=c=s.get(p,e),!1!==c){if(!0!==c){a=m[c]||R,s.ACTER&&(f.empty("sID",s.sID),e.t=c=v,a=v,E=s.err()),r=1;break}}else{if(s.ERR||s.REQ){f.empty("sID",s.sID),p.nxt(),e.t=c=v,a=v,E=s.err(),r=1;break}a=!1}if(!r){if(p.eol())break;p.nxt(),e.t=c=R,a=R}}}else e.t=c=R,a=R;return R===a||v===a?(u.type&&i.push(u),i.push(p.cur(1))):a&&a!==u.type?(u.type&&i.push(u),i.push({type:a,content:p.cur(1)})):u.type&&(u.content+=p.cur(1),i.push(u)),u=null,{state:e,tokens:i}}});t.PrismGrammar={VERSION:"1.0.2",clone:Re,extend:ve,parse:h,getMode:g}}return t.PrismGrammar});