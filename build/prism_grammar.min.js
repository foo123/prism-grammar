/**
*
*   PrismGrammar
*   @version: 2.1.0
*
*   Transform a grammar specification in JSON format, into a syntax-highlighter for Prism
*   https://github.com/foo123/prism-grammar
*
**/!function(t,e,n){"use strict";var s,r="object"==typeof module&&module.exports,o="function"==typeof define&&define.amd;r?module.exports=(module.$deps=module.$deps||{})[e]=module.$deps[e]||n.call(t,{NODE:module})||1:o&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(e)?define(e,["require","exports","module"],function(e,s,r){return n.call(t,{AMD:r})}):e in t||(t[e]=s=n.call(t,{})||1)&&o&&define(e,[],function(){return s})}(this,"PrismGrammar",function(t){"use strict";function e(t,e){var n=this,s=n.pattern,r=t.s.charAt(t.pos)||null;return r&&s===r?(!1!==e&&t.mov(1),[n.key,r]):!1}function n(t,e){var n=this,s=n.pattern,r=t.s.charAt(t.pos)||null;return r&&-1<s.indexOf(r)?(!1!==e&&t.mov(1),[n.key,r]):!1}function s(t,e){var n=this,s=n.pattern,r=s.length,o=t.s;return s===o.substr(t.pos,r)?(!1!==e&&t.mov(r),[n.key,s]):!1}function r(t,e){var n,s=this,r=s.pattern,o=t.s;return n=o.slice(t.pos).match(r[0]),!n||n.index>0?!1:(!1!==e&&t.mov(n[r[1]||0].length),[s.key,r[1]>0?n[r[1]]:n])}function o(t,e){var n=this;return!1!==e&&t.end(),[n.key,""]}function l(t,e,n,s){var r=Ae(e);if(me===r)return e;if(s[t])return s[t];n=n||0;var o,l=0;return e&&e.isCharList&&(l=1,delete e.isCharList),o=Oe&r?new rn(t,e,Oe,n):ve===r?new rn(t,e,ve,n):ye&r?new rn(t,e,l?_e:ye,n):($e|be)&r?new rn(t,e,$e,n):e,s[t]=o}function u(t,e,n,s,r,o){if(o[t])return o[t];var i,c,a,p,f,h,m,g=0,k=0,d=1;if(i=De(e),a=i.length,1===a)m=l(t,Qe(i[0],n,r),0,o);else if(a>1){for(p=(a>>>1)+1,c=0;p>=c;c++)f=Ae(i[c]),h=Ae(i[a-1-c]),(ve!==f||ve!==h)&&(d=0),be&f||be&h?g=1:(He(i[c],n)||He(i[a-1-c],n))&&(k=1);if(!d||s&&ye&Ae(s))if(!s||g||k)if(g||k){for(c=0;a>c;c++)i[c]=be&Ae(i[c])?u(t+"_"+c,i[c],n,s,r,o):l(t+"_"+c,Qe(i[c],n,r),c,o);m=a>1?new ln(t,i):i[0]}else{for(i=i.sort(Ge),c=0;a>c;c++)i[c]=l(t+"_"+c,Qe(i[c],n,r),c,o);m=a>1?new ln(t,i):i[0]}else m=l(t,Ye(i,s),0,o);else i=i.slice().join(""),i.isCharList=1,m=l(t,i,0,o)}return o[t]=m}function i(t,e,n,s,r){if(r[t])return r[t];var o,u,i,c,a,p,f;for(c=[],a=[],o=Me(e),u=0,i=o.length;i>u;u++)p=l(t+"_0_"+u,Qe(o[u][0],n,s),u,r),f=o[u].length>1?$e!==p.ptype||ye!==Ae(o[u][1])||He(o[u][1],n)?l(t+"_1_"+u,Qe(o[u][1],n,s),u,r):o[u][1]:p,c.push(p),a.push(f);return r[t]=new on(t,[c,a])}function c(t,e,n){var s,r,o,l,u,i,c,a,p,f,h,m;if(i=new String(Ue(t)),i.pos=0,1===i.length)f=""+t,e[f]||(e[f]={type:"simple",tokens:t}),t=f;else{for(s=[],r=[],o="",h=[];i.pos<i.length;)if(a=i.charAt(i.pos++),Ze.test(a))if(o.length&&("0"===o?r.push(U):"^^"===o?r.push(N):"^"===o?r.push(V):"$"===o?r.push(z):(e[o]||n[o]||(e[o]={type:"simple",tokens:o}),r.push(o)),o=""),'"'===a||"'"===a){for(c=a,l="";i.pos<i.length&&c!==(a=i.charAt(i.pos++));)l+=a;l.length?(f=""+l,e[f]||(e[f]={type:"simple",tokens:l}),r.push(f)):r.push("")}else if("*"===a||"+"===a||"?"===a)p=r.pop(),f=""+p+a,n[f]||(n[f]={type:"group",match:"*"===a?"zeroOrMore":"+"===a?"oneOrMore":"zeroOrOne",tokens:[p]}),r.push(f);else if("{"===a){for(u="";i.pos<i.length&&"}"!==(a=i.charAt(i.pos++));)u+=a;u=u.split(",").map(Ue),u[0]=u[0].length?parseInt(u[0],10)||0:0,0>u[0]&&(u[0]=0),2>u.length?u.push(u[0]):u[1]=u[1].length?parseInt(u[1],10)||w:w,0>u[1]&&(u[1]=0),p=r.pop(),f=""+p+["{",u[0],",",isFinite(u[1])?u[1]:"","}"].join(""),n[f]||(n[f]={type:"group",match:[u[0],u[1]],tokens:[p]}),r.push(f)}else{if("}"===a)continue;if("["===a){for(l="";i.pos<i.length&&"]"!==(a=i.charAt(i.pos++));)l+=a;f="["+l+"]",e[f]||(e[f]={type:"simple",tokens:l.split("")}),r.push(f)}else{if("]"===a)continue;"|"===a?(r.length>1?(f=""+r.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:r}),s.push(f)):r.length&&s.push(r[0]),r=[]):"("===a?(h.push([r,s,o]),r=[],s=[],o=""):")"===a&&(r.length>1?(f=""+r.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:r}),s.push(f)):r.length&&s.push(r[0]),r=[],s.length>1?(f=""+s.join(" | "),n[f]||(n[f]={type:"group",match:"either",tokens:s})):s.length&&(f=s[0]),s=[],m=h.pop(),r=m[0],s=m[1],o=m[2],p=f,f="("+p+")",n[f]||(n[f]=Le(e[p]||n[p])),r.push(f))}}else o+=a;o.length&&(e[o]||n[o]||(e[o]={type:"simple",tokens:o}),r.push(o)),o="",r.length>1?(f=""+r.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:r}),s.push(f)):r.length&&s.push(r[0]),r=[],s.length>1?(f=""+s.join(" | "),n[f]||(n[f]={type:"group",match:"either",tokens:s}),t=f):s.length&&(t=s[0]),s=[]}return t}function a(t,e){var n,s,r;for(s in t)t[ae](s)&&(n=s.split(":"),r=n[1]&&Ue(n[1]).length?Ue(n[1]):null,n=n[0],n!==s&&(t[n]=t[s],delete t[s],r&&(xe===Ae(t[n])?t[n].type||(t[n].type=r):t[n]={type:r,tokens:t[n]})));for(s in e)e[ae](s)&&(n=s.split(":"),r=n[1]&&Ue(n[1]).length?Ue(n[1]):null,n=n[0],n!==s&&(e[n]=e[s],delete e[s],r&&(xe===Ae(e[n])?e[n].type||(e[n].type=r):e[n]={type:r,tokens:e[n]})))}function p(t,e,n,s,r,o,l,a,m,g,k){var d,y,v,_,b,x,E,$,D,M,L,F,I,Z,J,re,ie,ce=null;if(ie=null,N===t)return new un(N,N,t,ie);if(V===t)return new un(V,V,t,ie);if(z===t||null===t)return new un(z,z,t,ie);if(""===t)return new un(G,"NONSPACE",t,ie);if(!1===t||0===t)return new un(U,"EMPTY",t,ie);if(be&Ae(t)&&(re=t,t="NGRAM_"+re.join("_"),s[t]||(s[t]={type:"ngram",tokens:re})),t=""+t,a[t])return a[t];for(n[t]?(d=n[t],Ce&Ae(d)&&(d=n[t]={type:"simple",tokens:d})):d=s[t]?s[t]:t,ye&Ae(d)&&(d=c(d,n,s),d=n[d]||s[d]);d.extend;)Z=d.extend,J=n[Z]||s[Z],delete d.extend,J&&(Ce&Ae(J)&&(J={type:"simple",tokens:J}),d=Ne(J,d));if("undefined"==typeof d.type&&(d[ae]("error")?(d.type="action",d.action=["error",d.error,!!d["in-context"]],delete d.error):d[ae]("context-start")?(d.type="action",d.action=["context-start",d["context-start"],!!d["in-context"]],delete d["context-start"]):d[ae]("context-end")?(d.type="action",d.action=["context-end",d["context-end"],!!d["in-context"]],delete d["context-end"]):d[ae]("empty")?(d.type="action",d.action=["empty",d.empty,!!d["in-context"]],delete d.empty):d[ae]("indent")?(d.type="action",d.action=["indent",d.indent,!!d["in-context"]],delete d.indent):d[ae]("outdent")?(d.type="action",d.action=["outdent",d.outdent,!!d["in-context"]],delete d.outdent):d[ae]("unique")?(d.type="action",d.action=["unique",ye&Ae(d.unique)?["_DEFAULT_",d.unique]:d.unique,!!d["in-context"]],delete d.unique):d[ae]("push")?(d.type="action",d.action=["push",d.push,!!d["in-context"]],delete d.push):d[ae]("pop")?(d.type="action",d.action=["pop",d.pop,!!d["in-context"]],delete d.pop):d.sequence||d.all?(d.type="group",d.match="sequence",d.tokens=d.sequence||d.all,d.all?delete d.all:delete d.sequence):d.either?(d.type="group",d.match="either",d.tokens=d.either,delete d.either):d.zeroOrMore?(d.type="group",d.match="zeroOrMore",d.tokens=d.zeroOrMore,delete d.zeroOrMore):d.oneOrMore?(d.type="group",d.match="oneOrMore",d.tokens=d.oneOrMore,delete d.oneOrMore):d.zeroOrOne?(d.type="group",d.match="zeroOrOne",d.tokens=d.zeroOrOne,delete d.zeroOrOne):d.comment?(d.type="comment",d.tokens=d.comment,delete d.comment):d.block?(d.type="block",d.tokens=d.block,delete d.block):d["escaped-block"]?(d.type="escaped-block",d.tokens=d["escaped-block"],delete d["escaped-block"]):d.simple?(d.type="simple",d.tokens=d.simple,delete d.simple):d.type="simple"),y=d.type?ue[d.type.toUpperCase().replace(Ke,"")]:B,ie=d.msg||null,B&y){if(N===d.tokens)return ce=new un(N,t,t,ie),a[t]=ce,ce;if(V===d.tokens)return ce=new un(V,t,t,ie),a[t]=ce,ce;if(z===d.tokens||null===d.tokens)return ce=new un(z,t,t,ie),a[t]=ce,ce;if(""===d.tokens)return ce=new un(G,t,t,ie),a[t]=ce,ce;if(!1===d.tokens||0===d.tokens)return ce=new un(U,t,t,ie),a[t]=ce,ce}if(oe&y||(d.tokens=De(d.tokens)),oe&y)d[ae]("action")?"error"===d.action[0]?d.action[0]=O:"context-start"===d.action[0]?d.action[0]=T:"context-end"===d.action[0]?d.action[0]=P:"empty"===d.action[0]?d.action[0]=R:"indent"===d.action[0]?d.action[0]=A:"outdent"===d.action[0]?d.action[0]=j:"unique"===d.action[0]?d.action[0]=S:"push"===d.action[0]?d.action[0]=q:"pop"===d.action[0]&&(d.action[0]=C):d[ae]("error")?d.action=[O,d.error,!!d["in-context"]]:d[ae]("context-start")?d.action=[T,d["context-start"],!!d["in-context"]]:d[ae]("context-end")?d.action=[P,d["context-end"],!!d["in-context"]]:d[ae]("empty")?d.action=[R,d.empty,!!d["in-context"]]:d[ae]("indent")?d.action=[A,d.indent,!!d["in-context"]]:d[ae]("outdent")?d.action=[j,d.outdent,!!d["in-context"]]:d[ae]("unique")?d.action=[S,ye&Ae(d.unique)?["_DEFAULT_",d.unique]:d.unique,!!d["in-context"]]:d[ae]("push")?d.action=[q,d.push,!!d["in-context"]]:d[ae]("pop")&&(d.action=[C,d.pop,!!d["in-context"]]),_=d.action.slice(),ce=new cn(oe,t,_,ie),a[t]=ce;else if(B&y)d.autocomplete&&h(d,t,k),v="undefined"==typeof d.combine?"\\b":d.combine,ce=new un(B,t,u(t,d.tokens.slice(),e,v,o,l),ie),a[t]=ce;else if(K&y)H&y&&f(d,g),ce=new an(y,t,i(t,d.tokens.slice(),e,o,l),ie,d.multiline,d.escape,r[t+".inside"]?1:0),a[t]=ce,d.interleave&&m.push(ce.clone());else if(ne&y){for(x=d.tokens.slice(),be&Ae(d.match)?ce=new pn(W,t,null,ie,d.match[0],d.match[1]):(b=le[d.match.toUpperCase()],ce=X===b?new pn(X,t,null,ie,0,1):te===b?new pn(te,t,null,ie,0,w):ee===b?new pn(ee,t,null,ie,1,w):Q&b?new pn(Q,t,null,ie):new pn(Y,t,null,ie)),a[t]=ce,E=[],M=0,L=x.length;L>M;M++)E=E.concat(p(x[M],e,n,s,r,o,l,a,m,g,k));ce.set(E)}else if(se&y){for(ce=Me(d.tokens.slice()).slice(),$=[],M=0,L=ce.length;L>M;M++)$[M]=ce[M].slice(),ce[M]=new pn(se,t+"_NGRAM_"+M,null,ie);for(a[t]=ce,M=0,L=ce.length;L>M;M++){for(D=$[M],E=[],F=0,I=D.length;I>F;F++)E=E.concat(p(D[F],e,n,s,r,o,l,a,m,g,k));ce[M].set(E)}}return a[t]}function f(t,e){var n,s,r,o,l,u=Me(t.tokens.slice());for(o=0,l=u.length;l>o;o++)n=u[o][0],s=u[o].length>1?u[o][1]:u[o][0],r=u[o].length>2?u[o][2]:"",null===s?(e.line=e.line||[],e.line.push(n)):(e.block=e.block||[],e.block.push([n,s,r]))}function h(t,e,n){var s=[].concat(De(t.tokens)).map(function(t){return{word:t,meta:e}});n.autocomplete=(n.autocomplete||[]).concat(s)}function m(t){var e,n,s,r,o,l,u,i,c,f,h,m,g,k,d,y;if(t.__parsed)return t;for(h={},m={},g={},d={},y={},k=[],t=Le(t),e=t.RegExpID||null,t.RegExpID=null,delete t.RegExpID,l=t.Lex||{},t.Lex=null,delete t.Lex,u=t.Syntax||{},t.Syntax=null,delete t.Syntax,o=t.Style||{},a(l,u),r=t.Parser||[],s=r.length,n=[],i=0;s>i;i++)c=r[i],f=p(c,e,l,u,o,h,m,g,k,d,y)||null,f&&(be&Ae(f)?n=n.concat(f):n.push(f));return t.Parser=n,t.cTokens=k,t.Style=o,t.Comments=d,t.Keywords=y,t.Extra=t.Extra||{},t.__parsed=1,t}function g(t){var e,n=new mn(m(t),{DEFAULT:k,ERROR:d}),s=0,r=null,o={"before-highlight":function(t){r===t.language&&(t._code=t.code,t.code="")},"before-insert":function(t){r===t.language&&(t.code=t._code,t._code="",t.highlightedCode=e.Token.stringify(n.parse(t.code,y),t.language))}};return{hook:function(t,n){if(!s){e=t,r=n;for(var l in o)o[ae](l)&&e.hooks.add(l,o[l]);s=1}},unhook:function(){if(s){var t,n,l=e.hooks.all;for(t in o)l[ae](t)&&o[ae](t)&&(n=l[t].indexOf(o[t]),n>-1&&l[t].splice(n,1));s=0,r=null,e=null}}}}var k,d,y=1,v=2,_=4,b=8,x=~_,E=~b,$=_|b,w=1/0,O=4,S=8,q=16,C=32,R=64,A=128,j=256,T=512,P=1024,D=2,M=4,L=8,N=4,F=8,V=16,z=32,I=N|V,U=64,G=128,B=256,K=512,Z=513,H=514,Q=1024,Y=2048,J=Y,W=4096,X=4097,te=4098,ee=4099,ne=8192,se=16384,re=Y|se,oe=32768,le={EITHER:Q,ALL:J,SEQUENCE:Y,ZEROORONE:X,ZEROORMORE:te,ONEORMORE:ee,REPEATED:W},ue={ACTION:oe,BLOCK:K,COMMENT:H,ESCAPEDBLOCK:Z,SIMPLE:B,GROUP:ne,NGRAM:se},ie=void 0,ce="prototype",ae="hasOwnProperty",pe="propertyIsEnumerable",fe=(Object.keys,Array[ce],Object[ce]),he=(Function[ce],fe.toString),me=4,ge=5,ke=6,de=8,ye=16,ve=17,_e=18,be=32,xe=64,Ee=128,$e=256,we=512,Oe=1024,Se=2048,qe=4096,Ce=ye|be,Re={"[object Number]":me,"[object String]":ye,"[object Array]":be,"[object RegExp]":$e,"[object Date]":we,"[object Function]":Ee,"[object Object]":xe},Ae=function(t){if(null===t)return Oe;if(!0===t||!1===t||t instanceof Boolean)return de;if(ie===t)return Se;var e=Re[he.call(t)]||qe;return me===e||t instanceof Number?isNaN(t)?ke:isFinite(t)?me:ge:ye===e||t instanceof String?1===t.length?ve:ye:be===e||t instanceof Array?be:$e===e||t instanceof RegExp?$e:we===e||t instanceof Date?we:Ee===e||t instanceof Function?Ee:xe===e?xe:qe},je=function(){var t,e,n,s,r,o,l=arguments,u=l.length;for(t=l[0]||{},r=1;u>r;r++)if(e=l[r],xe===Ae(e))for(s in e)e[ae](s)&&e[pe](s)&&(n=e[s],o=Ae(n),t[s]=me&o?0+n:we&o?new Date(n):Ce&o?n.slice():n);return t},Te=Object.create,Pe=function(t,e){var n,s=arguments.length,r="constructor";return 0===s?(t=Object,e={}):1===s?(e=t||{},t=Object):(t=t||Object,e=e||{}),e[ae](r)||(e[r]=function(){}),n=e[r],delete e[r],n[ce]=je(Te(t[ce]),e),n[ce][r]=n,n},De=function(t,e){return e||be!==Ae(t)?[t]:t},Me=function(t,e){return t=De(t),(e||be!==Ae(t[0]))&&(t=[t]),t},Le=function(t,e){var n,s,r,o,l=Ae(t),u=0;if(me===Ae(e)?e>0?(u=e,e=!0):e=!1:e=!1!==e,xe===l){s={};for(r in t)t[ae](r)&&t[pe](r)&&(n=Ae(t[r]),s[r]=xe===n?e?Le(t[r],u>0?u-1:e):t[r]:be===n?e?Le(t[r],u>0?u-1:e):t[r].slice():we&n?new Date(t[r]):ye&n?t[r].slice():me&n?0+t[r]:t[r])}else if(be===l)for(o=t.length,s=new Array(o),r=0;o>r;r++)n=Ae(t[r]),s[r]=xe===n?e?Le(t[r],u>0?u-1:e):t[r]:be===n?e?Le(t[r],u>0?u-1:e):t[r].slice():we&n?new Date(t[r]):ye&n?t[r].slice():me&n?0+t[r]:t[r];else s=we&l?new Date(t):ye&l?t.slice():me&l?0+t:t;return s},Ne=function(){var t,e,n,s,r,o,l,u,i,c,a=arguments,p=a.length;if(1>p)return null;for(e=Le(a[0]),n=1;p>n;n++)if(t=a[n])for(s in t)if(t[ae](s)&&t[pe](s))if(e[ae](s)&&e[pe](s)){if(i=Ae(e[s]),c=Ae(t[s]),xe===i&&xe===c)e[s]=Ne(e[s],t[s]);else if(be===i&&be===c){if(l=e[s],u=t[s],o=u.length,!o)continue;if(l.length)for(r=0;o>r;r++)0>l.indexOf(u[r])&&l.push(u[r]);else e[s]=u.slice()}}else e[s]=Le(t[s]);return e},Fe=/([.*+?^${}()|[\]\/\\\-])/g,Ve=function(t){return t.replace(Fe,"\\$1")},ze=function(t,e,n){var s,r,o,l,u,i=!0===n?0:1;for(ye&Ae(e)&&(e=[e,e],i=0),r=t.length,u="",s=0;r>s;)o=t.charAt(s),r>s+1&&"$"===o?(l=t.charCodeAt(s+1),36===l?(u+="$",s+=2):l>=48&&57>=l?(u+=e[i+l-48]||"",s+=2):(u+=o,s+=1)):(u+=o,s+=1);return u},Ie=/^\s+|\s+$/g,Ue=String[ce].trim?function(t){return t.trim()}:function(t){return t.replace(Ie,"")},Ge=function(t,e){return e.length-t.length},Be=/\r\n|\r|\n/g,Ke=/[\-_]/g,Ze=/^([\[\]{}()*+?|'"]|\s)/,He=function(t,e){return ye&Ae(e)&&ye&Ae(t)&&e.length&&e.length<=t.length&&e==t.substr(0,e.length)},Qe=function(t,e,n){if(!t||me===Ae(t))return t;var s,r=e?e.length||0:0;if(r&&e===t.substr(0,r)){var o,l,u,s,i,c=t.substr(r),a=c.charAt(0),p="";for(s=c.length;s--&&(i=c.charAt(s),a!==i);)"i"===i.toLowerCase()&&(p="i");return o=c.substring(1,s),l="^("+o+")",n[l]||(u=new RegExp(l,p),n[l]=u),n[l]}return t},Ye=function(t,e){var n,s="";return ye&Ae(e)&&(s=e),n=t.sort(Ge).map(Ve).join("|"),[new RegExp("^("+n+")"+s),1]},Je=0,We=function(){return++Je},Xe=function(t){return[t||"uuid",++Je,(new Date).getTime()].join("_")},tn=Math.max,en=/^[\s\u00a0]+/,nn=/[^\s\u00a0]/,sn=Pe({constructor:function(t){var e=this;e._=null,e.s=t?""+t:"",e.start=e.pos=0,e.lCP=e.lCV=0,e.lS=0},_:null,s:"",start:0,pos:0,lCP:0,lCV:0,lS:0,dispose:function(){var t=this;return t._=null,t.s=null,t.start=null,t.pos=null,t.lCP=null,t.lCV=null,t.lS=null,t},toString:function(){return this.s},sol:function(){return 0===this.pos},eol:function(){return this.pos>=this.s.length},end:function(){var t=this;return t.pos=t.s.length,t},mov:function(t){var e=this;return 0>t?e.pos=tn(0,e.pos-t):e.pos+=t,e},bck:function(t){var e=this;return e.pos=tn(0,t),e},sft:function(){var t=this;return t.start=t.pos,t},nxt:function(){var t,e=this,n=e.s;return e.pos<n.length?t=n.charAt(e.pos++)||null:void 0},cur:function(t){var e=this,n=e.s.slice(e.start,e.pos);return t&&(e.start=e.pos),n},upd:function(){var t=this;return t._&&(t._.pos=t.pos),t},spc:function(t){var e,n=this,s=n.pos,r=n.s.slice(s);return(e=r.match(en))?(!1!==t&&n.mov(e[0].length),1):0},col:function(t){var e=this;return t=t||1,e.lCP<e.start&&(e.lCV=sn.col(e.s,e.start,t,e.lCP,e.lCV),e.lCP=e.start,e._&&(e._.start=e.start,e._.lastColumnPos=e.lCP,e._.lastColumnValue=e.lCV,e._.lineStart=e.lS)),e.lCV-(e.lS?sn.col(e.s,e.lS,t):0)},ind:function(t){var e=this;return t=t||1,sn.col(e.s,null,t)-(e.lS?sn.col(e.s,e.lS,t):0)}});sn.col=function(t,e,n,s,r){var o,l;for(null===e&&(e=t.search(nn),-1==e&&(e=t.length)),o=s||0,l=r||0;e>o;++o)l+="	"==t.charAt(o)?n-l%n:1;return l},sn._=function(t){var e=new sn;return e._=t,e.s=""+t.string,e.start=t.start,e.pos=t.pos,e.lCP=t.lastColumnPos,e.lCV=t.lastColumnValue,e.lS=t.lineStart,e};var rn,on,ln,un,cn,an,pn,fn=Pe({constructor:function(t){this._=t||[]},_:null,dispose:function(){var t=this;return t._=null,t},toString:function(){return this._.slice().reverse().join("\n")},clone:function(){return new fn(this._.slice())},isEmpty:function(){return 0>=this._.length},pos:function(){return this._.length},peek:function(t){var e=this,n=e._;if(t=arguments.length?t:-1,n.length){if(0>t&&0<=n.length+t)return n[n.length+t];if(t>=0&&t<n.length)return n[t]}return null},pop:function(){return this._.pop()},shift:function(){return this._.shift()},push:function(t){var e=this;return e._.push(t),e},unshift:function(t){var e=this;return e._.unshift(t),e},pushAt:function(t,e,n,s){var r=this,o=r._;return n&&s&&(e[n]=s),t<o.length?o.splice(t,0,e):o.push(e),r},empty:function(t,e){var n=this,s=n._;if(t&&e)for(;s.length&&s[s.length-1]&&s[s.length-1][t]===e;)s.pop();else s.length=0;return n}}),hn=Pe({constructor:function gn(t,e,n){var s=this;s.id=e?Xe("state"):"state",t instanceof gn?(s.line=t.line,s.status=t.status,s.token=t.token,s.block=t.block,s.stack=t.stack.clone(),s.queu=t.queu.slice(),s.symb=Le(t.symb,1),s.ctx=t.ctx.slice(),s.err=t.err):(s.line=t||0,s.status=n||0,s.token=null,s.block=null,s.stack=new fn,s.queu=[],s.symb={},s.ctx=[],s.err=s.status&v?{}:null)},id:null,line:0,status:0,token:null,block:null,stack:null,queu:null,symb:null,ctx:null,err:null,dispose:function(){var t=this;return t.id=null,t.line=null,t.status=null,t.token=null,t.block=null,t.stack&&t.stack.dispose(),t.stack=null,t.queu=null,t.symb=null,t.ctx=null,t.err=null,t},clone:function(t){return new hn(this,t)},toString:function(){var t=this;return[t.id,t.line,t.token?t.token.name:"0",t.block?t.block.name:"0"].join("_")}});rn=Pe({constructor:function(t,l,u,i){var c=this;switch(c.type=D,c.name=t,c.pattern=null,c.ptype=u||ye,c.key=i||0,c.ptype){case Oe:c.pattern=null,c.match=o;break;case $e:c.pattern=$e&Ae(l)?[l,0]:[l[0],l[1]||0],c.match=r;break;case ve:case _e:c.pattern=l,c.match=_e===c.ptype?n:e;break;case ye:default:c.pattern=l,c.match=s}},type:null,name:null,pattern:null,ptype:null,key:0,dispose:function(){var t=this;return t.type=null,t.name=null,t.pattern=null,t.ptype=null,t.key=null,t},match:function(){return!1},toString:function(){var t=this;return["[","Pattern: ",t.name,", ",t.pattern?t.pattern.toString():null,"]"].join("")}}),ln=Pe(rn,{constructor:function(t,e,n){var s=this;s.type=M,s.name=t,s.pattern=e,s.key=!1!==n},match:function(t,e){var n,s,r=this,o=r.pattern,l=o.length,u=r.key;for(n=0;l>n;n++)if(s=o[n].match(t,e))return u?[n,s[1]]:s;return!1}}),on=Pe(rn,{constructor:function(t,e){var n=this;n.type=L,n.name=t,n.pattern=e,n.pattern[0]=new ln(n.name+"_Start",n.pattern[0],!1)},match:function(t,e){var n,s,r,o,l,u=this,i=u.pattern,c=i[0],a=i[1];return(s=c.match(t,e))?(n=a[s[0]],o=Ae(n),l=c.pattern[s[0]].ptype,$e===l&&(me===o?(r=s[1][n+1],n=new rn(u.name+"_End",r,r.length>1?ye:ve)):ye===o&&(r=ze(n,s[1]),n=new rn(u.name+"_End",r,r.length>1?ye:ve))),n):!1}}),un=Pe({constructor:function(t,e,n,s){var r=this;r.type=t||B,r.name=e,r.token=n,r.status=0,r.msg=s||null,r.$msg=null,r.$clone=null,N===r.name?r.name="<start-of-file>":V===r.name?r.name="<start-of-line>":z===r.name?r.name="<end-of-line>":F===r.name?r.name="<end-of-file>":U===r.name?r.name="<empty>":G===r.name&&(r.name="<nonspace>")},name:null,type:null,token:null,status:0,msg:null,$msg:null,$clone:null,$id:null,dispose:function(){var t=this;return t.type=null,t.name=null,t.token=null,t.status=null,t.msg=null,t.$msg=null,t.$clone=null,t.$id=null,t},clone:function(){var t,e,n,s=this,r=s.$clone;if(t=new s.constructor,t.type=s.type,t.name=s.name,t.token=s.token,t.msg=s.msg,r&&r.length)for(e=0,n=r.length;n>e;e++)t[r[e]]=s[r[e]];return t},get:function(t,e){var n=this,s=n.token,r=n.type,o=n.name,l=null;if(n.$msg=n.msg||null,e.token=null,N===r){if(N&e.status&&t.sol())return!0}else if(V===r){if(t.sol())return!0}else if(z===r){if(t.spc(),t.eol())return o}else{if(U===r)return n.status=0,!0;if(G===r)n.status&_&&t.spc()&&!t.eol()&&(n.status|=b),n.status&=x;else if(l=s.match(t))return e.token={name:o,value:t.cur(),token:l[1]},o}return n.status&&n.$msg&&(n.$msg=ze(n.$msg,o,!0)),!1},req:function(t){var e=this;return t?e.status|=_:e.status&=x,e},err:function(t,e,n,s,r){var o,l=this,u=l.name;return o=l.$msg?l.$msg:l.status&_?'Token "'+u+'" Expected':'Syntax Error: "'+u+'"',t&&t.status&v&&(t.err[e+"_"+n+"_"+s+"_"+r+"_"+u]=[e,n,s,r,o]),o},toString:function(){var t=this;return["[","Token: ",t.name,", ",t.token?t.token.toString():null,"]"].join("")}}),cn=Pe(un,{constructor:function(t,e,n,s){var r=this;r.type=t||oe,r.name=e,r.token=n,r.status=0,r.msg=s||null,r.$msg=null,r.$clone=null},get:function(t,e){var n,s,r,o,l,u,i,c,a,p,f,h=this,m=h.token||null,g=e.queu,k=e.symb,d=e.ctx,y=e.token,_=e.err,x=!!(e.status&v);if(h.status=0,h.$msg=null,m){if(l=h.msg,n=m[0],s=m[1],a=!!m[2],u=e.line,c=t.pos,i=y&&y.value?c-y.value.length:i-1,O===n)return x&&(h.$msg=l?l:"Error",p=u+"_"+i+"_"+u+"_"+c+"_"+h.name,_[p]=[u,i,u,c,h.err()]),h.status|=b,!1;if(T===n)d.unshift({symb:{},queu:[]});else if(P===n)d.length&&d.shift();else if(R===n)a?d.length&&(d[0].queu.length=0):g.length=0;else if(S===n){if(a){if(!d.length)return!0;k=d[0].symb}if(y){if(r=s[1],o=s[0],r=me===Ae(r)?y.token[r]:ze(r,y.token,!0),k[ae](o)||(k[o]={}),k[o][ae](r))return x&&(h.$msg=l?ze(l,r,!0):'Duplicate "'+r+'"',f=h.err(),p=k[o][r][0]+"_"+k[o][r][1]+"_"+k[o][r][2]+"_"+k[o][r][3]+"_"+h.name,_[p]=[k[o][r][0],k[o][r][1],k[o][r][2],k[o][r][3],f],p=u+"_"+i+"_"+u+"_"+c+"_"+h.name,_[p]=[u,i,u,c,f]),h.status|=b,!1;k[o][r]=[u,i,u,c]}}else if(C===n){if(a){if(!d.length)return!0;g=d[0].queu}if(s){if(y&&(s=me===Ae(s)?y.token[s]:ze(s,y.token)),!g.length||s!==g[0][0])return x&&(g.length?(h.$msg=l?ze(l,[g[0][0],s],!0):'Tokens do not match "'+g[0][0]+'","'+s+'"',f=h.err(),p=g[0][1]+"_"+g[0][2]+"_"+g[0][3]+"_"+g[0][4]+"_"+h.name,_[p]=[g[0][1],g[0][2],g[0][3],g[0][4],f],p=u+"_"+i+"_"+u+"_"+c+"_"+h.name,_[p]=[u,i,u,c,f]):(h.$msg=l?ze(l,["",s],!0):'Token does not match "'+s+'"',f=h.err(),p=u+"_"+i+"_"+u+"_"+c+"_"+h.name,_[p]=[u,i,u,c,f])),g.shift(),h.status|=b,!1;g.shift()}else g.shift()}else if(q===n&&s){if(a){if(!d.length)return!0;g=d[0].queu}y&&(s=me===Ae(s)?y.token[s]:ze(s,y.token)),g.unshift([s,u,i,u,c])}}return!0}}),an=Pe(un,{constructor:function(t,e,n,s,r,o,l){var u=this;u.type=t,u.name=e,u.token=n,u.status=0,u.msg=s||null,u.mline="undefined"==typeof r?1:r,u.esc=o||"\\",u.inter=l,u.$msg=null,u.$clone=["mline","esc","inter"]},inter:0,mline:0,esc:null,get:function(t,e){var n,s,r,o,l,u,i,c,a,p,f,h,m,g,k=this,d=0,y=0,v="",_=k.mline,b=k.token,E=k.name,$=k.type,w=k.inter,O=w?E+".inside":E,S=0,q=Z===$,C=k.esc,R="",A="",j="",T="",P=e.stack;if(k.$msg=k.msg||null,m=e.line,g=t.pos,H===$&&(k.status&=x),l=0,e.block&&e.block.name===E?(y=1,n=e.block.end,l=1,u=O,p=e.block.s,h=e.block.i,f=e.block.e,R=e.block._s,A=e.block._i,T=""):!e.block&&(n=b.match(t))&&(y=1,p=[m,g],h=[[m,t.pos],[m,t.pos]],f=[m,t.pos],R=t.cur(),A="",T="",j="",e.block={name:E,end:n,s:p,i:h,e:f,_s:R,_i:A,_e:j},u=E),y){if(r=P.pos(),o=Oe===n.type,w){if(l&&o&&t.sol())return k.status&=x,e.current=null,e.block=null,!1;if(!l)return P.pushAt(r,k.clone(),"$id",E),u}if(d=n.match(t),s=_,a=0,d)u=o?O:E,j=t.cur().slice(T.length);else for(c=t.pos;!t.eol();){if(i=t.pos,!(q&&S||!n.match(t))){w&&t.pos>i&&i>c?(u=O,t.bck(i),a=1):(u=E,d=1),j=t.cur().slice(T.length);break}v=t.nxt(),T+=v,S=!S&&v===C}return s=_||q&&S,h[1]=[m,i],f=[m,t.pos],d||!s&&!a?e.block=null:(e.block.i=h,e.block.e=f,e.block._i+=T,e.block._e=j,e.stack.pushAt(r,k.clone(),"$id",E)),e.token={name:E,value:t.cur(),token:[R+A+T+j,A+T,R,j]},u}return k.status&&k.$msg&&(k.$msg=ze(k.$msg,E,!0)),!1}}),pn=Pe(un,{constructor:function(t,e,n,s,r,o){var l=this;l.type=t?t:W,l.name=e||null,l.token=null,l.status=0,l.msg=s||null,l.min=r||0,l.max=o||w,l.found=0,l.$msg=null,l.$clone=["min","max","found"],n&&l.set(n)},min:0,max:1,found:0,set:function(t){return t&&(this.token=De(t)),this},get:function(t,e){var n,s,r,o,l,u,i,c,a,p,f,h,m,g,k,d=this,y=d.type,v=d.token,$=v.length;if(d.$msg=d.msg||null,d.status&=E,h=t.pos,l=e.stack,Q===y){for(p=0,f=0,d.status|=_,u=[],n=0;$>n;n++){if(r=v[n].clone().req(1),o=r.get(t,e),r.status&_&&(p++,u.push(r.err())),!1!==o)return o;r.status&b&&(f++,t.bck(h))}return p>0?d.status|=_:d.status&=x,$===f&&p>0?d.status|=b:d.status&=E,d.status&&!d.$msg&&u.length&&(d.$msg=u.join(" | ")),!1}if(re&y){k=y&Y?1:0,k?d.status|=_:d.status&=x,m=l.pos(),g=d.name+"_"+We(),s=0;do r=v[s].clone().req(k),o=r.get(t,e),s++;while($>s&&!0===o&&I&r.type);if(s>=$)return r.status&b?(k?d.status|=b:d.status&=E,t.bck(h)):k&&r.status&_&&(d.status|=b),d.status&&!d.$msg&&(d.$msg=r.err()),o;if(!1!==o){if(!0!==o)for(n=$-1;n>=s;n--)l.pushAt(m+$-n-1,v[n].clone().req(1),"$id",g);return o}return r.status&b?(k?d.status|=b:d.status&=E,t.bck(h)):k&&r.status&_&&(d.status|=b),d.status&&!d.$msg&&(d.$msg=r.err()),!1}for(p=0,i=d.found,c=d.min,a=d.max,d.status&=x,m=l.pos(),g=d.name+"_"+We(),u=[],n=0;$>n;n++){if(r=v[n].clone().req(1),o=r.get(t,e),!1!==o){if(++i,a>=i)return d.found=i,l.pushAt(m,d.clone(),"$id",g),d.found=0,o;break}r.status&_&&(p++,u.push(r.err())),r.status&b&&t.bck(h)}return c>i?d.status|=_:d.status&=x,i>a||c>i&&p>0?d.status|=b:d.status&=E,d.status&&!d.$msg&&u.length&&(d.$msg=u.join(" | ")),!1}}),k="",d="";{var mn=Pe({constructor:function(t,e){var n=this;n.DEF=e.DEFAULT,n.ERR=e.ERROR,n.Tokens=t.Parser||[],n.cTokens=t.cTokens.length?t.cTokens:null,n.Style=t.Style},ERR:null,DEF:null,cTokens:null,Tokens:null,Style:null,dispose:function(){var t=this;return t.ERR=null,t.DEF=null,t.cTokens=null,t.Tokens=null,t.Style=null,t},parse:function(t,e){t=t||"";var n,s,r,o,l,u=this,i=t.split(Be),c=i.length,a=null;if(e=e||y,r=!!(e&v),o=!!(e&y),s={state:new hn(0,0,e),tokens:null},o)for(a=[],n=0;c>n;n++)s.state.line=n,s=u.getLineTokens(i[n],s.state,n),a=a.concat(s.tokens),c>n+1&&a.push("\r\n");else for(n=0;c>n;n++)s.state.line=n,s=u.getLineTokens(i[n],s.state,n);return l=o&&r?{tokens:a,errors:s.state.err}:o?a:s.state.err,s.state.dispose(),l},getLineTokens:function(t,e){var n,s,r,o,l,u,i,c,a,p,f,h,m,g,k,d,y,v=this,_=v.cTokens,x=v.Tokens,E=x.length,w=v.Style,O=v.DEF,S=v.ERR;for(c=[],d=new sn(t),y=e.stack,0===e.line?e.status|=N:e.status&=~N,a={id:null,type:null,content:""},p=null,f=null,i=null,d.sol()&&!y.isEmpty()&&z===y.peek().type&&y.pop(),m=e.line,h=d.pos,k=!1;!d.eol();){if(s=0,O===f||S===f){if(i&&k){for(g="";c.length&&i===c[c.length-1].id;)g=c.pop().content+g;i===a.id?g+=a.content:a.type&&c.push(a),g+=d.cur(1),c.push(g)}else a.type&&c.push(a),g=d.cur(1),c.push(g);a={id:null,type:null,content:""}}else f&&f!==a.type?(g=d.cur(1),a.type&&c.push(a),a={id:i,type:f,content:g}):a.type&&(g=d.cur(1),a.content+=g);if(f=!1,i=null,k=!1,!y.isEmpty()&&G===y.peek().type||!d.spc()){for(;!y.isEmpty()&&!d.eol();){if(_){for(o=0,r=0;o<_.length;)if(l=_[o++],p=l.get(d,e),!1!==p){f=w[p]||O,i=l.name,r=1;break}if(r){s=1;break}}if(h=d.pos,l=y.pop(),p=l.get(d,e),!1!==p){if(!0!==p){for(f=w[p]||O,i=l.name;!y.isEmpty()&&oe===y.peek().type;)u=y.pop(),u.get(d,e),u.status&b&&(p=S,f=S,k=!0);s=1;break}}else{if(l.status&$){y.empty("$id",l.$id),d.nxt(),p=S,f=S,l.err(e,m,h,m,d.pos),s=1;break}f=!1}}if(!s){if(d.eol())break;for(n=0;E>n;n++)if(h=d.pos,l=x[n],p=l.get(d,e),!1!==p){if(!0!==p){for(f=w[p]||O,i=l.name;!y.isEmpty()&&oe===y.peek().type;)u=y.pop(),u.get(d,e),u.status&b&&(p=S,f=S,k=!0);s=1;break}}else{if(l.status&$){y.empty("$id",l.$id),d.nxt(),p=S,f=S,l.err(e,m,h,m,d.pos),s=1;break}f=!1}if(!s){if(d.eol())break;d.nxt(),p=O,f=O}}}else p=O,f=O}if(O===f||S===f)if(i&&k){for(g="";c.length&&i===c[c.length-1].id;)g=c.pop().content+g;i===a.id?g+=a.content:a.type&&c.push(a),g+=d.cur(1),c.push(g)}else a.type&&c.push(a),g=d.cur(1),c.push(g);else f&&f!==a.type?(g=d.cur(1),a.type&&c.push(a),c.push({id:i,type:f,content:g})):a.type&&(g=d.cur(1),a.content+=g,c.push(a));return a=null,{state:e,tokens:c}}});t.PrismGrammar={VERSION:"2.1.0",clone:Le,extend:Ne,parse:m,getMode:g}}return t.PrismGrammar});